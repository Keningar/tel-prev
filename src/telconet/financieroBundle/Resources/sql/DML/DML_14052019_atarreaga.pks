/**
 * @author Alex Arreaga <atarreaga@telconet.ec>
 * @version 1.0
 * @since 14-05-2019    
 * Se crean las sentencias DML para insertar y modificar parámetros relacionados a Débitos Parciales.
 */
--SE CREA CARACTERÍSTICA 'DEBITOS PARCIALES DIARIOS'
INSERT INTO DB_COMERCIAL.ADMI_CARACTERISTICA (
  ID_CARACTERISTICA,
  DESCRIPCION_CARACTERISTICA,
  TIPO_INGRESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  TIPO
) VALUES(
    DB_COMERCIAL.SEQ_ADMI_CARACTERISTICA.NEXTVAL,
    'DEBITOS PARCIALES DIARIOS',
    'T',
    'Activo',
    SYSDATE,
    'atarreaga',
    'FINANCIERO'
  ); 
 
--SE ASOCIA CARACTERÍSTICA 'DEBITOS PARCIALES DIARIOS' A CUENTAS
--Cuentas Banco del Pacifico 
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco del Pacifico' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'DEBITOS PARCIALES DIARIOS'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO                         = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );

--Cuentas Banco Guayaquil
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Guayaquil' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'DEBITOS PARCIALES DIARIOS'
    AND CAR.ESTADO                       = 'Activo'
    AND CAR.TIPO 	                 = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );

--Cuentas Banco del Austro 
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco del Austro' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'DEBITOS PARCIALES DIARIOS'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 		         = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );
 
--Cuentas Banco Machala 
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Machala' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'DEBITOS PARCIALES DIARIOS'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );

--Cuentas Banco Internacional 
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Internacional' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'DEBITOS PARCIALES DIARIOS'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );
    
--Cuentas Banco Bolivariano 
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Bolivariano' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'DEBITOS PARCIALES DIARIOS'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );

--Cuentas Banco Produbanco 
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Produbanco' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'DEBITOS PARCIALES DIARIOS'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );

--Cuentas Banco Ruminahui 
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Ruminahui' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'DEBITOS PARCIALES DIARIOS'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
);

--Cuentas Banco del Pichincha
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco del Pichincha' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'DEBITOS PARCIALES DIARIOS'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
);

--Cuentas Bancos, Cooperativas y Mutualista
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Bancos, Cooperativas y Mutualista' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'DEBITOS PARCIALES DIARIOS'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );
 
--SE CREA CARACTERÍSTICA 'GUARDA_REFERENCIA_PARCIAL'
INSERT INTO DB_COMERCIAL.ADMI_CARACTERISTICA (
  ID_CARACTERISTICA,
  DESCRIPCION_CARACTERISTICA,
  TIPO_INGRESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  TIPO
) VALUES(
    DB_COMERCIAL.SEQ_ADMI_CARACTERISTICA.NEXTVAL,
    'GUARDA_REFERENCIA_PARCIAL',
    'T',
    'Activo',
    SYSDATE,
    'atarreaga',
    'FINANCIERO'
  );

--SE CREA CARACTERÍSTICA 'NO_REFERENCIA'
INSERT INTO DB_COMERCIAL.ADMI_CARACTERISTICA (
  ID_CARACTERISTICA,
  DESCRIPCION_CARACTERISTICA,
  TIPO_INGRESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  TIPO
) VALUES(
    DB_COMERCIAL.SEQ_ADMI_CARACTERISTICA.NEXTVAL,
    'NO_REFERENCIA',
    'T',
    'Activo',
    SYSDATE,
    'atarreaga',
    'FINANCIERO'
  );

--SE CREA CARACTERÍSTICA 'FECHA_REFERENCIA'
INSERT INTO DB_COMERCIAL.ADMI_CARACTERISTICA (
  ID_CARACTERISTICA,
  DESCRIPCION_CARACTERISTICA,
  TIPO_INGRESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  TIPO
) VALUES(
    DB_COMERCIAL.SEQ_ADMI_CARACTERISTICA.NEXTVAL,
    'FECHA_REFERENCIA',
    'T',
    'Activo',
    SYSDATE,
    'atarreaga',
    'FINANCIERO'
  );

--SE CREA CARACTERÍSTICA DE 'ESTADO_DOC'
INSERT INTO DB_COMERCIAL.ADMI_CARACTERISTICA (
  ID_CARACTERISTICA,
  DESCRIPCION_CARACTERISTICA,
  TIPO_INGRESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  TIPO
) VALUES(
    DB_COMERCIAL.SEQ_ADMI_CARACTERISTICA.NEXTVAL,
    'ESTADO_DOC',
    'T',
    'Activo',
    SYSDATE,
    'atarreaga',
    'FINANCIERO'
  );

--SE ASOCIA CARACTERÍSTICA 'GUARDA_REFERENCIA_PARCIAL' A CUENTA BANCO PICHINCHA
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco del Pichincha' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'GUARDA_REFERENCIA_PARCIAL'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );

--SE ASOCIA CARACTERÍSTICA 'NO_REFERENCIA' A CUENTA BANCO PICHINCHA 
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco del Pichincha' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'NO_REFERENCIA'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    '23',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );

--SE ASOCIA CARACTERÍSTICA 'FECHA_REFERENCIA' A CUENTA BANCO PICHINCHA
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco del Pichincha' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'FECHA_REFERENCIA'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    '13',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );

--SE ASOCIA CARACTERÍSTICA DE 'ESTADO_DOC' A CUENTA BANCO PICHINCHA
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco del Pichincha' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'ESTADO_DOC'
    AND CAR.ESTADO                       = 'Activo'
    AND CAR.TIPO 			 = 'FINANCIERO'
    ),
    '16',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );

--SE CONFIGURA COL_IDENTIFICACION EN ADMI_FORMATO_DEBITO_RESPUESTA A CUENTAS. 
--Cuentas Banco Guayaquil
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET COL_IDENTIFICACION = '7' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
    SELECT ID_FORMATO_DEBITO_RESPUESTA 
    FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
    WHERE BANCO_TIPO_CUENTA_ID = 
      (
      SELECT BANCO_TIPO_CUENTA_ID 
      FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
      WHERE NOMBRE_GRUPO = 'Cuentas Banco Guayaquil' 
      AND EMPRESA_COD = 18 
      AND ESTADO = 'Activo'
      ) 
    AND EMPRESA_COD = '18'
); 

--Cuentas Bancos, Cooperativas y Mutualista
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET COL_IDENTIFICACION = '5' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
    SELECT ID_FORMATO_DEBITO_RESPUESTA 
    FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
    WHERE BANCO_TIPO_CUENTA_ID = 
      (
      SELECT BANCO_TIPO_CUENTA_ID 
      FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
      WHERE NOMBRE_GRUPO = 'Cuentas Bancos, Cooperativas y Mutualista' 
      AND EMPRESA_COD = 18 
      AND ESTADO = 'Activo'
      ) 
    AND EMPRESA_COD = '18'    
);

--Cuentas Banco Internacional
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET COL_IDENTIFICACION = '5' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
    SELECT ID_FORMATO_DEBITO_RESPUESTA 
    FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
    WHERE BANCO_TIPO_CUENTA_ID = 
      (
      SELECT BANCO_TIPO_CUENTA_ID 
      FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
      WHERE NOMBRE_GRUPO = 'Cuentas Banco Internacional' 
      AND EMPRESA_COD = 18 
      AND ESTADO = 'Activo'
      ) 
    AND EMPRESA_COD = '18'
);

--SE CONFIGURA BUSCA_POR A IDENTIFICACION|CUENTA|VALOR EN ADMI_FORMATO_DEBITO_RESPUESTA A CUENTAS.
--Cuentas Banco del Pacifico    
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET BUSCA_POR = 'IDENTIFICACION|CUENTA|VALOR' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
    SELECT ID_FORMATO_DEBITO_RESPUESTA 
    FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
    WHERE BANCO_TIPO_CUENTA_ID = 
      (
      SELECT BANCO_TIPO_CUENTA_ID 
      FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
      WHERE NOMBRE_GRUPO = 'Cuentas Banco del Pacifico' 
      AND EMPRESA_COD = 18 
      AND ESTADO = 'Activo'
      )
    AND EMPRESA_COD = '18'
);

--Cuentas Banco Guayaquil    
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET BUSCA_POR = 'IDENTIFICACION|CUENTA|VALOR' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
  SELECT ID_FORMATO_DEBITO_RESPUESTA 
  FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  WHERE BANCO_TIPO_CUENTA_ID = 
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Guayaquil' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    )
  AND EMPRESA_COD = '18'
); 

--Cuentas Banco del Austro       
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET BUSCA_POR = 'IDENTIFICACION|CUENTA|VALOR' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
  SELECT ID_FORMATO_DEBITO_RESPUESTA 
  FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  WHERE BANCO_TIPO_CUENTA_ID = 
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco del Austro' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ) 
  AND EMPRESA_COD = '18'
);

--Cuentas Banco Machala  
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET BUSCA_POR= 'IDENTIFICACION|CUENTA|VALOR' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
  SELECT ID_FORMATO_DEBITO_RESPUESTA 
  FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  WHERE BANCO_TIPO_CUENTA_ID = 
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Machala' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ) 
  AND EMPRESA_COD = '18'
); 

--Cuentas Banco Internacional 
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET BUSCA_POR= 'IDENTIFICACION|CUENTA|VALOR' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
  SELECT ID_FORMATO_DEBITO_RESPUESTA 
  FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  WHERE BANCO_TIPO_CUENTA_ID = 
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Internacional' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ) 
  AND EMPRESA_COD = '18'
); 

--Cuentas Banco Bolivariano    
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET BUSCA_POR= 'IDENTIFICACION|CUENTA|VALOR' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
  SELECT ID_FORMATO_DEBITO_RESPUESTA 
  FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  WHERE BANCO_TIPO_CUENTA_ID = 
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Bolivariano' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ) 
  AND EMPRESA_COD = '18'
); 

--Cuentas Banco Produbanco   
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET BUSCA_POR= 'IDENTIFICACION|CUENTA|VALOR' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
  SELECT ID_FORMATO_DEBITO_RESPUESTA 
  FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  WHERE BANCO_TIPO_CUENTA_ID = 
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Produbanco' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ) 
  AND EMPRESA_COD = '18'
); 

--Cuentas Banco Ruminahui  
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET BUSCA_POR= 'IDENTIFICACION|CUENTA|VALOR' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
  SELECT ID_FORMATO_DEBITO_RESPUESTA 
  FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  WHERE BANCO_TIPO_CUENTA_ID = 
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Ruminahui' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ) 
  AND EMPRESA_COD = '18'
); 

--Cuentas Bancos, Cooperativas y Mutualista 
UPDATE DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  SET BUSCA_POR = 'IDENTIFICACION|CUENTA|VALOR' 
  WHERE ID_FORMATO_DEBITO_RESPUESTA = (
  SELECT ID_FORMATO_DEBITO_RESPUESTA 
  FROM DB_FINANCIERO.ADMI_FORMATO_DEBITO_RESPUESTA 
  WHERE BANCO_TIPO_CUENTA_ID = 
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Bancos, Cooperativas y Mutualista' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ) 
  AND EMPRESA_COD = '18'
);

--SE CREA CARACTERÍSTICA 'PROCESA_ARCHIVO' 
INSERT INTO DB_COMERCIAL.ADMI_CARACTERISTICA (
  ID_CARACTERISTICA,
  DESCRIPCION_CARACTERISTICA,
  TIPO_INGRESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  TIPO
) VALUES(
    DB_COMERCIAL.SEQ_ADMI_CARACTERISTICA.NEXTVAL,
    'PROCESA_ARCHIVO',
    'T',
    'Activo',
    SYSDATE,
    'atarreaga',
    'FINANCIERO'
  ); 

--SE ASOCIA CARACTERÍSTICA 'PROCESA_ARCHIVO' A CUENTA
--Cuentas Banco Bolivariano
INSERT INTO DB_FINANCIERO.ADMI_FORMATO_DEBITO_CARACT (
  ID_FORMATO_DEBITO_CARACT,
  BANCO_TIPO_CUENTA_ID,
  EMPRESA_COD,
  CARACTERISTICA_ID,
  VALOR,
  PROCESO,
  ESTADO,
  FE_CREACION,
  USR_CREACION,
  IP_CREACION
) VALUES (
    DB_FINANCIERO.SEQ_ADMI_FORMATO_DEBITO_CARACT.NEXTVAL,
    (
    SELECT BANCO_TIPO_CUENTA_ID 
    FROM DB_FINANCIERO.ADMI_GRUPO_ARCHIVO_DEBITO_CAB 
    WHERE NOMBRE_GRUPO = 'Cuentas Banco Bolivariano' 
    AND EMPRESA_COD = 18 
    AND ESTADO = 'Activo'
    ),
    18,
    (
    SELECT CAR.ID_CARACTERISTICA
    FROM DB_COMERCIAL.ADMI_CARACTERISTICA CAR
    WHERE CAR.DESCRIPCION_CARACTERISTICA = 'PROCESA_ARCHIVO'
    AND CAR.ESTADO             	         = 'Activo'
    AND CAR.TIPO                         = 'FINANCIERO'
    ),
    'S',
    'SUBIDA',
    'Activo',
    SYSDATE,
    'atarreaga',
    '127.0.0.1'
  );

--CREACIÓN DE PARÁMETRO 'CIERRE FINAL MANUAL' EN DB_GENERAL.ADMI_PARAMETRO_CAB.
INSERT INTO DB_GENERAL.ADMI_PARAMETRO_CAB (
  ID_PARAMETRO,
  NOMBRE_PARAMETRO,
  DESCRIPCION,
  MODULO,
  PROCESO,
  ESTADO,
  USR_CREACION,
  FE_CREACION,
  IP_CREACION
) VALUES (
    DB_GENERAL.SEQ_ADMI_PARAMETRO_CAB.NEXTVAL,
    'Cierre final manual',
    'PERMITE REALIZAR EL CIERRE FINAL MANUAL A LOS BANCOS',
    'FINANCIERO',
    'DEBITOS',
    'Activo',
    'atarreaga',
     SYSDATE,
    '127.0.0.1'
  );

--CREAR DETALLE 'CIERRE FINAL MANUAL' EN DB_GENERAL.ADMI_PARAMETRO_DET.
INSERT INTO DB_GENERAL.ADMI_PARAMETRO_DET (
  ID_PARAMETRO_DET,
  PARAMETRO_ID,
  DESCRIPCION,
  VALOR1,
  ESTADO,
  USR_CREACION,
  FE_CREACION,
  IP_CREACION,
  EMPRESA_COD
)
  VALUES (
    DB_GENERAL.SEQ_ADMI_PARAMETRO_DET.NEXTVAL,
    (
    SELECT ID_PARAMETRO     
    FROM DB_GENERAL.ADMI_PARAMETRO_CAB 
    WHERE NOMBRE_PARAMETRO = 'Cierre final manual' 
    AND ESTADO             = 'Activo'
    ),
    'Cierre final manual',
    'Cierre final manual',
    'Activo',
    'atarreaga',
    SYSDATE,
    '127.0.0.1',
    18
  );
  
--CREAR DETALLE 'CIERRE MANUAL POR DEBITOS PARCIALES' EN DB_GENERAL.ADMI_PARAMETRO_DET.
INSERT INTO DB_GENERAL.ADMI_PARAMETRO_DET (
  ID_PARAMETRO_DET,
  PARAMETRO_ID,
  DESCRIPCION,
  VALOR1,
  ESTADO,
  USR_CREACION,
  FE_CREACION,
  IP_CREACION,
  EMPRESA_COD
)
  VALUES (
    DB_GENERAL.SEQ_ADMI_PARAMETRO_DET.NEXTVAL,
    (
    SELECT ID_PARAMETRO     
    FROM DB_GENERAL.ADMI_PARAMETRO_CAB 
    WHERE NOMBRE_PARAMETRO = 'Cierre final manual' 
    AND ESTADO             = 'Activo'
    ),
   'Cierre manual por debitos parciales',
   'Cierre manual por debitos parciales',
   'Activo',
   'atarreaga',
   SYSDATE,
   '127.0.0.1',
   18
  );

COMMIT;
/
