
/**
 * Se crea la tabla INFO_CONSUMO_CLOUD_CAB para la facturación por consumo.
 * Se crean los constraint necesarios y comentarios.
 * @author Luis Cabrera <lcabrera@telconet.ec>
 * @version 1.0 
 * @since 13/03/2018
 */
CREATE TABLE DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB (
    ID_CONSUMO_CLOUD_CAB     NUMBER,
    NOMBRE                   VARCHAR2(100),
    OBSERVACION              CLOB,
    PUNTO_ID                 NUMBER,
    PUNTO_FACTURACION_ID     NUMBER,
    SERVICIO_ID              NUMBER,
    FE_CONSUMO               DATE,
    ESTADO                   VARCHAR2(15),
    USR_CREACION             VARCHAR2(30),
    IP_CREACION              VARCHAR2(15),
    FE_CREACION              TIMESTAMP,
    USR_ULT_MOD              VARCHAR2(30),
    IP_ULT_MOD               VARCHAR2(15),
    FE_ULT_MOD               TIMESTAMP,
    PROCESO_MASIVO_CAB_ID    NUMBER
);

COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.ID_CONSUMO_CLOUD_CAB IS 'ID DE LA TABLA';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.NOMBRE IS 'NOMBRE DEL CONSUMO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.OBSERVACION IS 'OBSERVACIÓN';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.PUNTO_ID IS 'PUNTO_ID RELACIONADO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.PUNTO_FACTURACION_ID IS 'PUNTO DE FACTURACIÓN DEL USUARIO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.SERVICIO_ID IS 'SERVICIO AL QUE ESTÁ RELACIONADO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.FE_CONSUMO IS 'FECHA DE CONSUMO DEL REGISTRO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.ESTADO IS 'ESTADO DEL REGISTRO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.USR_CREACION IS 'USUARIO DE CREACIÓN DEL REGISTRO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.IP_CREACION IS 'IP DE CREACIÓN DEL REGISTRO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.FE_CREACION IS 'FECHA DE CREACIÓN DEL REGISTRO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.USR_ULT_MOD IS 'USUARIO DE ÚLTIMA MODIFICACIÓN DEL REGISTRO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.IP_ULT_MOD IS 'IP DE ÚLTIMA MODIFICACIÓN DEL REGISTRO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.FE_ULT_MOD IS 'FECHA DE ÚLTIMA MODIFICACIÓN DEL REGISTRO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB.PROCESO_MASIVO_CAB_ID IS 'ID DE DB_INFRAESTRUCTURA.INFO_PROCESO_MASIVO_CAB';

ALTER TABLE DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB ADD CONSTRAINT INFO_CONSUMO_CLOUD_CAB_PK PRIMARY KEY (ID_CONSUMO_CLOUD_CAB);

CREATE SEQUENCE DB_FINANCIERO.SEQ_INFO_CONSUMO_CLOUD_CAB INCREMENT BY 1 START WITH 1 MAXVALUE 99999999999999999999 MINVALUE 1 NOCACHE;

/**
 * Se crea la tabla INFO_CONSUMO_CLOUD_DET para la facturación por consumo.
 * Se crean los constraint necesarios y comentarios.
 * @author Luis Cabrera <lcabrera@telconet.ec>
 * @version 1.0 
 * @since 13/03/2018
 */
CREATE TABLE DB_FINANCIERO.INFO_CONSUMO_CLOUD_DET (
    ID_CONSUMO_CLOUD_DET     NUMBER,
    CONSUMO_CLOUD_CAB_ID     NUMBER NOT NULL,
    CARACTERISTICA_ID        NUMBER,
    VALOR                    NUMBER,
    USR_CREACION             VARCHAR2(30),
    IP_CREACION              VARCHAR2(15),
    FE_CREACION              TIMESTAMP
);

COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_DET.ID_CONSUMO_CLOUD_DET IS 'ID DE LA TABLA';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_DET.CONSUMO_CLOUD_CAB_ID IS 'ID DEL PADRE';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_DET.CARACTERISTICA_ID IS 'RELACIÓN CON LA TABLA DB_COMERCIAL.ADMI_CARACTERISTICA';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_DET.VALOR IS 'VALOR DE LA CARACRTERÍSTICA';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_DET.USR_CREACION IS 'USUARIO DE CREACIÓN DEL REGISTRO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_DET.IP_CREACION IS 'IP DE CREACIÓN DEL REGISTRO';
COMMENT ON COLUMN DB_FINANCIERO.INFO_CONSUMO_CLOUD_DET.FE_CREACION IS 'FECHA DE CREACIÓN DEL REGISTRO';

ALTER TABLE DB_FINANCIERO.INFO_CONSUMO_CLOUD_DET ADD CONSTRAINT INFO_CONSUMO_CLOUD_DET_PK PRIMARY KEY (ID_CONSUMO_CLOUD_DET);

ALTER TABLE DB_FINANCIERO.INFO_CONSUMO_CLOUD_DET ADD CONSTRAINT INFO_CONSUMO_CLOUD_DET_FK FOREIGN KEY (CONSUMO_CLOUD_CAB_ID)
    REFERENCES DB_FINANCIERO.INFO_CONSUMO_CLOUD_CAB(ID_CONSUMO_CLOUD_CAB);

CREATE SEQUENCE DB_FINANCIERO.SEQ_INFO_CONSUMO_CLOUD_DET INCREMENT BY 1 START WITH 1 MAXVALUE 99999999999999999999 MINVALUE 1 NOCACHE;
