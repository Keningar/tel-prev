/**
 *
 * ROLLBACK PARA LOS PARAMETROS CREADOS EN EL PROYECTO ECDF FASE 2
 *	 
 * @author Jonathan Mazon <jmazon@telconet.ec>
 * @version 1.0 10-09-2021
 */


--ELIMINAR PARAMETRO DET DATOS DEL PROYECTO SOPORTE
DELETE FROM db_general.admi_parametro_det 
WHERE parametro_id = (
                        SELECT id_parametro FROM db_general.admi_parametro_cab 
                        WHERE nombre_parametro = 'PROYECTO_INTEGRACION_FORMULARIO_SOPORTE'
                     );
--ELIMINAR PARAMETRO CAB DATOS DEL PROYECTO SOPORTE
DELETE FROM db_general.admi_parametro_cab 
WHERE nombre_parametro = 'PROYECTO_INTEGRACION_FORMULARIO_SOPORTE';


--ELIMINAR PARAMETRO DET MODULO ADMINISTRACION
DELETE FROM db_general.admi_parametro_det 
WHERE parametro_id = (
                        SELECT id_parametro FROM db_general.admi_parametro_cab 
                        WHERE nombre_parametro = 'ADMI_CORREO_FORMULARIO_SOPORTE'
                     );
--ELIMINAR PARAMETRO CAB MODULO ADMINISTRACION
DELETE FROM db_general.admi_parametro_cab 
WHERE nombre_parametro = 'ADMI_CORREO_FORMULARIO_SOPORTE';

--ELIMINAR PARAMETRO DET DE LA FECHA MINIMA DE SUSCRIPCION
DELETE FROM db_general.admi_parametro_det 
WHERE parametro_id = (
                        SELECT id_parametro FROM db_general.admi_parametro_cab 
                        WHERE nombre_parametro = 'PRODUCTO_FECHA_MINIMA_SUSCRIPCION'
                     );
--ELIMINAR PARAMETRO CAB DE LA FECHA MINIMA DE SUSCRIPCION
DELETE FROM db_general.admi_parametro_cab 
WHERE nombre_parametro = 'PRODUCTO_FECHA_MINIMA_SUSCRIPCION';

--ELIMINAR CARACTERISTICA FECHA MINIMA
DELETE FROM DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE CARACTERISTICA_ID = (SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA ac WHERE DESCRIPCION_CARACTERISTICA = 'FECHA_MINIMA_SUSCRIPCION');

DELETE FROM DB_COMERCIAL.ADMI_CARACTERISTICA
WHERE DESCRIPCION_CARACTERISTICA = 'FECHA_MINIMA_SUSCRIPCION';

UPDATE DB_GENERAL.ADMI_PARAMETRO_DET
SET VALOR5=NULL
WHERE PARAMETRO_ID =(SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB WHERE NOMBRE_PARAMETRO = 'CONFI_ADICIONAL_PROD_TV') AND VALOR1 = 'ECDF';

--ELIMINAR CARACTERISTICA FECHA ACTIVACION
DELETE FROM DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE CARACTERISTICA_ID = (SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA ac WHERE DESCRIPCION_CARACTERISTICA = 'FECHA_ACTIVACION');

DELETE FROM DB_COMERCIAL.ADMI_CARACTERISTICA
WHERE DESCRIPCION_CARACTERISTICA = 'FECHA_ACTIVACION';

UPDATE DB_GENERAL.ADMI_PARAMETRO_DET
SET VALOR6=NULL
WHERE PARAMETRO_ID =(SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB WHERE NOMBRE_PARAMETRO = 'CONFI_ADICIONAL_PROD_TV')AND VALOR1 = 'ECDF';

--SALDO PENDIENTE
UPDATE DB_GENERAL.ADMI_PARAMETRO_DET
SET OBSERVACION='Servicio suspendido por falta de pago. Comuníquese con su proveedor'
WHERE PARAMETRO_ID = (SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB  WHERE NOMBRE_PARAMETRO = 'PARAMETROS_WS_PRODUCTOS_TV') AND VALOR3 = 'VERIFICA_SALDO_PENDIENTE';

--ELIMINAR PARAMETRO DET TAREA RAPIDA FLUJO CANCELACION DEL SERVICIO ADICIONAL Y PUNTO
DELETE FROM db_general.admi_parametro_det 
WHERE parametro_id = (
                        SELECT id_parametro FROM db_general.admi_parametro_cab 
                        WHERE nombre_parametro = 'PRODUCTO_CANCELACION_TAREA_RAPIDA'
                     );
--ELIMINAR PARAMETRO CAB TAREA RAPIDA FLUJO CANCELACION DEL SERVICIO ADICIONAL Y PUNTO
DELETE FROM db_general.admi_parametro_cab 
WHERE nombre_parametro = 'PRODUCTO_CANCELACION_TAREA_RAPIDA';

--ELIMINAR PRODUCTO DE LA FACTURACION DETALLADA
DELETE FROM db_general.admi_parametro_det 
WHERE parametro_id = (
                        SELECT id_parametro FROM db_general.admi_parametro_cab 
                        WHERE nombre_parametro = 'FACTURACION SOLICITUD DETALLADA'
                     )
AND DESCRIPCION = 'ElCanalDelFutbol';

--ELIMINAR CARACT PARA LA FACTURACION
DELETE FROM DB_COMERCIAL.ADMI_CARACTERISTICA
WHERE DESCRIPCION_CARACTERISTICA = 'ELCANALDELFUTBOL';

--ELIMINAR PARAMETRO DET USADO PARA LA FACTURACION DEL SERVICIO ADICIONAL
DELETE FROM db_general.admi_parametro_det 
WHERE parametro_id = (
                        SELECT id_parametro FROM db_general.admi_parametro_cab 
                        WHERE nombre_parametro = 'FACTURACION_SERV_ADICIONAL_ECDF'
                     );
--ELIMINAR PARAMETRO CAB USADO PARA LA FACTURACION DEL SERVICIO ADICIONAL
DELETE FROM db_general.admi_parametro_cab 
WHERE nombre_parametro = 'FACTURACION_SERV_ADICIONAL_ECDF';

DELETE FROM DB_SOPORTE.ADMI_TAREA 
WHERE nombre_tarea = 'El canal del fútbol';

COMMIT;
/
