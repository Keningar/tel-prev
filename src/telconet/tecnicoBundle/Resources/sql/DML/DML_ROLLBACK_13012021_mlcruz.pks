DELETE
FROM DB_GENERAL.ADMI_PARAMETRO_DET
WHERE ID_PARAMETRO_DET IN
  ( SELECT DET.ID_PARAMETRO_DET
    FROM DB_GENERAL.ADMI_PARAMETRO_CAB CAB
    INNER JOIN DB_GENERAL.ADMI_PARAMETRO_DET DET
    ON DET.PARAMETRO_ID = CAB.ID_PARAMETRO
    WHERE CAB.NOMBRE_PARAMETRO = 'PARAMETROS_ASOCIADOS_A_SERVICIOS_MD'
    AND CAB.ESTADO = 'Activo'
    AND DET.VALOR1 IN ( 'NOMBRES_TECNICOS_PRECIOS_PRODUCTOS_PARAMETRIZADOS',
                        'PRODUCTOS_POR_FLUJO_DE_GRUPO',
                        'KEY_SECRET_TELCOS',
                        'INFO_TOKEN_PROCESOS_MASIVOS_BD',
                        'INFO_CONSUMO_WS_SMS',
                        'ESTADOS_SERVICIOS_PROD_ADICIONALES_A_CONSIDERAR'
                        )
    AND DET.ESTADO = 'Activo'
  );
DELETE
FROM DB_GENERAL.ADMI_PARAMETRO_DET
WHERE ID_PARAMETRO_DET IN
  ( SELECT DET.ID_PARAMETRO_DET
    FROM DB_GENERAL.ADMI_PARAMETRO_CAB CAB
    INNER JOIN DB_GENERAL.ADMI_PARAMETRO_DET DET
    ON DET.PARAMETRO_ID = CAB.ID_PARAMETRO
    WHERE CAB.NOMBRE_PARAMETRO = 'PARAMETROS_ASOCIADOS_A_SERVICIOS_MD'
    AND CAB.ESTADO = 'Activo'
    AND DET.VALOR1 = 'PRECIOS_PRODUCTOS'
    AND DET.VALOR2 IN ('1320', '1321')
    AND DET.ESTADO = 'Activo'
  );
DELETE
FROM DB_TOKENSECURITY.USER_TOKEN
WHERE APPLICATION_ID = 
(
  SELECT ID_APPLICATION
  FROM DB_TOKENSECURITY.APPLICATION
  WHERE name = 'APP.PROCESOS_MASIVOS_BD_SMS'
);
DELETE
FROM DB_TOKENSECURITY.WEB_SERVICE
WHERE ID_APPLICATION = 
(
  SELECT ID_APPLICATION
  FROM DB_TOKENSECURITY.APPLICATION
  WHERE name = 'APP.PROCESOS_MASIVOS_BD_SMS'
);
DELETE
FROM DB_TOKENSECURITY.APPLICATION
WHERE NAME = 'APP.PROCESOS_MASIVOS_BD_SMS';
DELETE
FROM DB_COMUNICACION.INFO_ALIAS_PLANTILLA
WHERE PLANTILLA_ID = 
(SELECT ID_PLANTILLA
  FROM DB_COMUNICACION.ADMI_PLANTILLA
  WHERE CODIGO='ERRORCPMGENERAL'
  AND ESTADO = 'Activo');
DELETE
FROM DB_COMUNICACION.ADMI_PLANTILLA
WHERE CODIGO = 'ERRORCPMGENERAL';
COMMIT;
/