--SE AGREGA NUEVO CAMPO OFICINA_ID A LA TABLA DB_SOPORTE.INFO_ASIGNACION_SOLICITUD
ALTER TABLE "DB_SOPORTE"."INFO_ASIGNACION_SOLICITUD" ADD "OFICINA_ID" NUMBER;
COMMENT ON COLUMN DB_SOPORTE.INFO_ASIGNACION_SOLICITUD.OFICINA_ID  IS 'CAMPO QUE DEFINE A QUE OFICINA PERTENECE LA ASIGNACION';

--SE REGULARIZA DATOS PARA EL NUEVO CAMPO OFICINA_ID EN LA TABLA DB_SOPORTE.INFO_ASIGNACION_SOLICITUD
UPDATE DB_SOPORTE.INFO_ASIGNACION_SOLICITUD SET OFICINA_ID = 225 WHERE DEPARTAMENTO_ID=132;
UPDATE DB_SOPORTE.INFO_ASIGNACION_SOLICITUD SET OFICINA_ID = 68  WHERE DEPARTAMENTO_ID=131 AND USR_ASIGNADO NOT IN ('gvelez','mmoreta');
UPDATE DB_SOPORTE.INFO_ASIGNACION_SOLICITUD SET OFICINA_ID = 80 WHERE DEPARTAMENTO_ID=131 AND USR_ASIGNADO in ('gvelez','mmoreta');

COMMIT;

--SE AGREGA CONSTRAINT A LA TABLA PARA EL NUEVO CAMPO OFICINA_ID EN LA TABLA DB_SOPORTE.INFO_ASIGNACION_SOLICITUD
ALTER TABLE    "DB_SOPORTE"."INFO_ASIGNACION_SOLICITUD" 
ADD CONSTRAINT "INFO_ASIGNACION_SOLICITUD_FK3" 
FOREIGN KEY    (OFICINA_ID)
REFERENCES     DB_COMERCIAL.INFO_OFICINA_GRUPO (ID_OFICINA);

/
