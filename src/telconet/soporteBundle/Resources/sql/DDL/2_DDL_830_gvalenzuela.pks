/* CREACION DE LA TABLA ADMI_INTERVALO */
CREATE TABLE DB_SOPORTE.ADMI_INTERVALO 
(
  ID_INTERVALO     NUMBER,
  HORA_INI         TIMESTAMP    NOT NULL,
  HORA_FIN         TIMESTAMP    NOT NULL,
  FE_CREACION      TIMESTAMP    NOT NULL,
  USR_CREACION     VARCHAR2(20) NOT NULL,
  IP_CREACION      VARCHAR2(20) NOT NULL,
  FE_MODIFICACION  TIMESTAMP,
  USR_MODIFICACION VARCHAR2(20),
  IP_MODIFICACION  VARCHAR2(20),
  ESTADO           VARCHAR2(20) NOT NULL
);

/* CLAVE PRIMARIA */
ALTER TABLE DB_SOPORTE.ADMI_INTERVALO ADD CONSTRAINT ADMI_INTERVALO_PK PRIMARY KEY (ID_INTERVALO);

/* COMENTARIOS */
COMMENT ON COLUMN DB_SOPORTE.ADMI_INTERVALO.ID_INTERVALO     IS 'ID DE LA TABLA';
COMMENT ON COLUMN DB_SOPORTE.ADMI_INTERVALO.HORA_INI         IS 'HORA INICIO DEL INTERVALO DE TRABAJO';
COMMENT ON COLUMN DB_SOPORTE.ADMI_INTERVALO.HORA_FIN         IS 'HORA FIN DEL INTERVALO DE TRABAJO';
COMMENT ON COLUMN DB_SOPORTE.ADMI_INTERVALO.FE_CREACION      IS 'FECHA DE CREACION DEL INTERVALO';
COMMENT ON COLUMN DB_SOPORTE.ADMI_INTERVALO.USR_CREACION     IS 'USUARIO QUIEN CREA EL INTERVALO';
COMMENT ON COLUMN DB_SOPORTE.ADMI_INTERVALO.IP_CREACION      IS 'IP DONDE SE CREA EL INTERVALO';
COMMENT ON COLUMN DB_SOPORTE.ADMI_INTERVALO.FE_MODIFICACION  IS 'FECHA DE MODIFICACION DEL INTERVALO';
COMMENT ON COLUMN DB_SOPORTE.ADMI_INTERVALO.USR_MODIFICACION IS 'USUARIO QUIEN MODIFICA EL INTERVALO';
COMMENT ON COLUMN DB_SOPORTE.ADMI_INTERVALO.IP_MODIFICACION  IS 'IP DONDE FUE MODIFICADO EL INTERVALO';
COMMENT ON COLUMN DB_SOPORTE.ADMI_INTERVALO.ESTADO           IS 'ESTADO DEL INTERVALO';

/* CREACION DEL SECUENCIAL */
CREATE SEQUENCE DB_SOPORTE.SEQ_ADMI_INTERVALO MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  CYCLE;


/* CREACION DE LA INFO_CUADRILLA_PLANIF_CAB */
CREATE TABLE DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB
(
    ID_CUADRILLA_PLANIF_CAB NUMBER,
    CUADRILLA_ID     	    NUMBER 	 NOT NULL,
    INTERVALO_ID     	    NUMBER 	 NOT NULL,
    ZONA_ID      	    NUMBER       NOT NULL,
    EMPRESA_COD      	    VARCHAR2(3)  NOT NULL,
    FE_TRABAJO       	    TIMESTAMP 	 NOT NULL,
    ASIGNADO_MOBILE  	    VARCHAR2(1),
    FE_CREACION      	    TIMESTAMP    NOT NULL,
    USR_CREACION     	    VARCHAR2(15) NOT NULL,
    IP_CREACION      	    VARCHAR2(16) NOT NULL,
    FE_MODIFICACION  	    TIMESTAMP,
    USR_MODIFICACION 	    VARCHAR2(15),
    IP_MODIFICACION         VARCHAR2(20),
    ESTADO                  VARCHAR2(15) NOT NULL
);

/* CLAVE PRIMARIA */
ALTER TABLE DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB ADD CONSTRAINT INFO_CUADRILLA_PLANIF_CAB_PK PRIMARY KEY (ID_CUADRILLA_PLANIF_CAB);

/* COMENTARIOS */
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.ID_CUADRILLA_PLANIF_CAB	IS 'ID DE LA TABLA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.CUADRILLA_ID 		IS 'ID DE LA CUADRILLA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.INTERVALO_ID 		IS 'ID DEL INTERVALO ASIGNADO A LA CUADRILLA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.ZONA_ID 		        IS 'ID DE LA ZONA ASIGNADA A LA CUADRILLA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.EMPRESA_COD 		IS 'CODIGO DE LA EMPRESA QUE SE ASIGNA A LA CUADRILLA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.FE_TRABAJO 		IS 'FECHA DE TRABAJO ASIGNADA A LA CUADRILLA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.ASIGNADO_MOBILE 		IS 'DETERMINA SI ESTA CUADRILLA SE ASIGNO PARA PLANIFICACION MOBILE';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.FE_CREACION 		IS 'FECHA DE CREACION DEL REGISTRO';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.USR_CREACION 		IS 'USUARIO DE CREACION DEL REGISTRO';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.IP_CREACION	 	IS 'IP DE CREACION DEL REGISTRO';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.FE_MODIFICACION 		IS 'FECHA DE MODIFICACION DEL REGISTRO';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.USR_MODIFICACION 	IS 'USUARIO DE MODIFICACION DEL REGISTRO';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.IP_MODIFICACION 		IS 'IP DE MODIFICACION';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB.ESTADO 			IS 'ESTADO DEL REGISTRO';

/* CREACION DEL SECUENCIAL */
CREATE SEQUENCE DB_SOPORTE.SEQ_INFO_CUADRILLA_PLANIF_CAB MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  CYCLE;


/* CREACION DE LA INFO_CUADRILLA_PLANIF_DET */
CREATE TABLE DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET
(
    ID_CUADRILLA_PLANIF_DET	NUMBER,
    CUADRILLA_PLANIF_CAB_ID	NUMBER      NOT NULL,
    FE_INICIO                   TIMESTAMP   NOT NULL,
    FE_FIN                      TIMESTAMP   NOT NULL,
    PERSONA_EMPRESA_ROL_ID      NUMBER, -- Id de la persona empresa rol encargado de la cuadrilla o cuadrillas (Calendario)
    ORDEN                       NUMBER, -- Orden para el calendario
    LOCACION                    NUMBER,	-- Locacion para el calendario    
    DETALLE_SOLICITUD_ID        NUMBER,	-- Id de deetalle de solicitud de planificacion
    COMUNICACION_ID             NUMBER, -- Id de la tarea de la info comunicacion
    FE_CREACION                 TIMESTAMP    NOT NULL,
    USR_CREACION                VARCHAR2(15) NOT NULL,
    IP_CREACION                 VARCHAR2(16) NOT NULL,
    FE_MODIFICACION  	    	TIMESTAMP,
    USR_MODIFICACION 	    	VARCHAR2(15),
    IP_MODIFICACION         	VARCHAR2(20),
    ESTADO                  	VARCHAR2(15) NOT NULL
);

/* CLAVE PRIMARIA */
ALTER TABLE DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET ADD CONSTRAINT INFO_CUADRILLA_PLANIF_DET_PK PRIMARY KEY (ID_CUADRILLA_PLANIF_DET);

/* CLAVE FORANEA */
ALTER TABLE DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET ADD CONSTRAINT INFO_CUADRILLA_PLANIF_DET_FK FOREIGN KEY (CUADRILLA_PLANIF_CAB_ID) 
	REFERENCES DB_SOPORTE.INFO_CUADRILLA_PLANIF_CAB (ID_CUADRILLA_PLANIF_CAB);
							 
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.ID_CUADRILLA_PLANIF_DET 	IS 'ID DE LA TABLA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.CUADRILLA_PLANIF_CAB_ID 	IS 'ID DE LA TABLA CUADRILLA PLANIFICACION CABECERA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.FE_INICIO 		IS 'FECHA DE INICIO DEL INTERVALO DE ACTIVIDAD DE LA CUADRILLA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.FE_FIN 			IS 'FECHA DE FINALIZACION DEL INTERVALO DE ACTIVIDAD DE LA CUADRILLA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.PERSONA_EMPRESA_ROL_ID 	IS 'ID DE LA PERSONA EMPRESA ROL QUE PLANIFICA LA CUADRILLA';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.ORDEN 			IS 'ORDEN SEGUN LA HORA EN QUE SE VISUALIZARA EN EL CALENDARIO DE PLANIFICACION';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.LOCACION 		IS 'LOCACION DENTRO DE UNA MISMA HORA EN QUE SE VISUALIZARA EN EL CALENDARIO DE PLANIFICACION';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.DETALLE_SOLICITUD_ID 	IS 'ID DE LA SOLICITUD DE PLANIFICACION';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.COMUNICACION_ID         	IS 'ID DE LA TAREA DE SOPORTE';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.FE_CREACION      	IS 'FECHA DE CREACION DEL REGISTRO';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.USR_CREACION     	IS 'USUARIO DE CREACION DEL REGISTRO';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.IP_CREACION      	IS 'IP DE CREACION DEL REGISTRO';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.FE_MODIFICACION  	IS 'FECHA DE MODIFICACION DEL REGISTRO';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.USR_MODIFICACION 	IS 'USUARIO DE MODIFICACION DEL REGISTRO';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.IP_MODIFICACION 		IS 'IP DE MODIFICACION';
COMMENT ON COLUMN DB_SOPORTE.INFO_CUADRILLA_PLANIF_DET.ESTADO			IS 'ESTADO DEL REGISTRO';		

--CREACION DE SECUENCIA
CREATE SEQUENCE "DB_SOPORTE"."SEQ_INFO_CUADRILLA_PLANIF_DET" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  NOORDER  CYCLE;

--AGREGA CAMPO HAL A LAS CUADRILLAS
ALTER TABLE DB_COMERCIAL.ADMI_CUADRILLA ADD ES_HAL VARCHAR2(1);

--CREACION DEL SYNONYM EN DB_INFRAESTRUCTURA
CREATE SYNONYM DB_INFRAESTRUCTURA.ADMI_ZONA FOR DB_GENERAL.ADMI_ZONA;