
--SE ACTUALIZA EL PRODUCTO A REQUERIR INFORMACION TECNICA
UPDATE DB_COMERCIAL.ADMI_PRODUCTO SET REQUIERE_INFO_TECNICA = NULL, REQUIERE_PLANIFICACION = NULL WHERE ID_PRODUCTO = 1452;

--DELETE DETALLES PARAMETROS PARA LA CLASS RELACION CON ADMI_PRODUCTO_CARACTERISTICA
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PRODUCTO_CARACTERISTICA_CLASS_RELACION'
    )
AND VALOR1 = (SELECT ID_PRODUCTO_CARACTERISITICA FROM DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA WHERE ESTADO = 'Activo'
    AND PRODUCTO_ID = (SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo')
    AND CARACTERISTICA_ID = (SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA WHERE DESCRIPCION_CARACTERISTICA = 'Cantidad Camaras' AND ESTADO = 'Activo'));

--DELETE DETALLES PARAMETROS PARA LA CARACTERISTICA RELACION CON ADMI_PRODUCTO
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PRODUCTO_CARACTERISTICA_RELACION_PRODUCTO'
    )
AND VALOR1 = (SELECT ID_PRODUCTO_CARACTERISITICA FROM DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA WHERE ESTADO = 'Activo'
    AND PRODUCTO_ID = (SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo')
    AND CARACTERISTICA_ID = (SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA WHERE DESCRIPCION_CARACTERISTICA = 'Cantidad Camaras' AND ESTADO = 'Activo'));

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'Cantidad Camaras'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'Cantidad Camaras' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'Precio Camaras'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'Precio Camaras' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'RELACION_SERVICIOS_GPON_SAFECITY'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'RELACION_SERVICIOS_GPON_SAFECITY' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'TIPO_RED'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'TIPO_RED' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'ID_DETALLE_TAREA_INSTALACION'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'ID_DETALLE_TAREA_INSTALACION' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'SERVICIO_EN_SWITCH_POE'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'SERVICIO_EN_SWITCH_POE' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'SERVICIO_ADICIONAL'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'SERVICIO_ADICIONAL' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'MIGRACION_SWITCH_POE'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'MIGRACION_SWITCH_POE' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'CLAVE_CAMARA'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'CLAVE_CAMARA' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'CODEC'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'CODEC' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'FPS'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'FPS' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'MAC CLIENTE'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'MAC CLIENTE' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'RESOLUCION'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'RESOLUCION' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'URL_CAMARA'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'URL_CAMARA' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'USUARIO_CAMARA'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'USUARIO_CAMARA' AND ESTADO = 'Activo' );

--REVERSO SERVICIO ADICIONAL
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'CONFIG_PRODUCTO_DATOS_SAFE_CITY'
    )
AND VALOR1 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
          WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
AND VALOR2 = 'AGREGAR_SERVICIO_ADICIONAL';

--reverso producto id en el parámetro de máximo números de cámaras
UPDATE DB_GENERAL.ADMI_PARAMETRO_DET
SET VALOR3 = NULL
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PARAMETROS PROYECTO GPON SAFECITY'
    )
AND DESCRIPCION = 'MAXIMO_CAMARAS_POR_PUNTO';

--reverso parámetro de máximo números de cámaras
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PARAMETROS PROYECTO GPON SAFECITY'
    )
AND VALOR2 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
          WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
AND DESCRIPCION = 'MAXIMO_CAMARAS_POR_PUNTO';

--reverso parámetro de máximo números de cámaras
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PROD_Cantidad Camaras'
    )
AND VALOR2 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' );

--reverso el parámetro cantidad de cámaras por el producto id
UPDATE DB_GENERAL.ADMI_PARAMETRO_DET
SET VALOR2 = NULL
WHERE PARAMETRO_ID = (SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB
    WHERE NOMBRE_PARAMETRO = 'PROD_Cantidad Camaras');

--reverso relacion con servicio principal
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PARAMETROS PROYECTO GPON SAFECITY'
    )
AND VALOR2 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
          WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
AND DESCRIPCION = 'VALIDAR RELACION SERVICIO ADICIONAL CON DATOS SAFECITY';

-- REVERSO DETALLE PARAMETROS PARA COORDINAR LA ORDEN SERVICIO AUTOMATICA DEL PRODCUTO SAFE ANALYTICS CAM
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'CONFIG_PRODUCTO_DATOS_SAFE_CITY'
    )
AND VALOR1 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
          WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND VALOR2 = 'COORDINAR_OBSERVACION';

--Reverso el detalle para el proceso y tarea de instalación de la camara internet vpnogpon
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'NUEVA_RED_GPON_TN'
    )
AND VALOR1 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
          WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND DESCRIPCION = 'TAREA DE INSTALACION DEL SERVICIO';

--Reverso el detalle para no mostrar el producto adicional en la factibilidad y coordinacion con el internet vpnogpon
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'NUEVA_RED_GPON_TN'
    )
AND VALOR1 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
          WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND VALOR2 = 'FLUJO_OCULTO';

--Reverso el detalle de la actualización del estado de la tarea del servicio SAFE ANALYTICS CAM
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'NUEVA_RED_GPON_TN'
    )
AND VALOR1 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
          WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
AND DESCRIPCION = 'CAMBIAR ESTADO TAREA SERVICIO';

--reverso el estado a Activo el parametro de estado repetido de AsignadoTarea
UPDATE DB_GENERAL.ADMI_PARAMETRO_DET SET ESTADO = 'Activo' WHERE ID_PARAMETRO_DET = 17861;

--Reverso el detalle para el nombre del uso de la subred del producto 'SAFE ANALYTICS CAM'
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE
    DESCRIPCION = 'PARAMETRO USO SUBRED PARA SERVICIOS ADICIONALES SAFECITY'
    AND VALOR1 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM' AND ESTADO = 'Activo' )
    AND PARAMETRO_ID = ( SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB WHERE NOMBRE_PARAMETRO = 'NUEVA_RED_GPON_TN' );

--Reverso del detalle de parametro para la mascara y prefijo del producto 'SAFE ANALYTICS CAM'
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE
    PARAMETRO_ID = ( SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB
        WHERE NOMBRE_PARAMETRO = 'PARAMETROS MASCARA Y PREFIJOS DE SUBREDES PRODUCTO' )
    AND VALOR1 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'SAFE ANALYTICS CAM'
        AND ESTADO = 'Activo' );

--reverso de los detalles de parametros para el producto SECURITY_NG_FIREWALL
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
    WHERE PARAMETRO_ID = ( SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB
          WHERE NOMBRE_PARAMETRO = 'CONFIG_PRODUCTO_DATOS_SAFE_CITY' AND ESTADO = 'Activo')
    AND VALOR1 = 'PRODUCTO_SECURITY_NG_FIREWALL';

--reverso de los detalles de parametros para el producto INTERNET VPNoGPON
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
    WHERE PARAMETRO_ID = ( SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB
          WHERE NOMBRE_PARAMETRO = 'CONFIG_PRODUCTO_DATOS_SAFE_CITY' AND ESTADO = 'Activo')
    AND VALOR1 = 'PRODUCTO_INTERNET_VPNoGPON';

-- REVERSO PARAMETRO PARA LA CANTIDAD DE PUERTOS DISPONIBLES DEFAULT POR ONT DEL PRODUCTO INTERNET VPN GPON
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE
    VALOR1 = 'PUERTO_DISPONIBLE_DEFAULT_ONT'
    AND VALOR3 = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
                   WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
    AND PARAMETRO_ID = ( SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB WHERE NOMBRE_PARAMETRO = 'CONFIG_PRODUCTO_DATOS_SAFE_CITY' );

-- REVERSO PARAMETRO PARA LA CANTIDAD DE PUERTOS DISPONIBLES DEFAULT POR ONT DEL PRODUCTO DATOS SAFECITY
UPDATE DB_GENERAL.ADMI_PARAMETRO_DET
SET VALOR3 = NULL
WHERE
    VALOR1 = 'PUERTO_DISPONIBLE_DEFAULT_ONT'
    AND PARAMETRO_ID = ( SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB WHERE NOMBRE_PARAMETRO = 'CONFIG_PRODUCTO_DATOS_SAFE_CITY' );

--Reverso el detalle de parámetro para definir el tipo de red al SAFE ANALYTICS CAM
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
    WHERE PARAMETRO_ID = ( SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB
          WHERE NOMBRE_PARAMETRO = 'CONFIG_PRODUCTO_DATOS_SAFE_CITY' AND ESTADO = 'Activo')
    AND VALOR1 = 'TIPO_RED_NO_VISIBLE_ORDEN_SERVICIO';

--DELETE DETALLES PARAMETROS PARA LA CLASS RELACION CON ADMI_PRODUCTO_CARACTERISTICA
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PRODUCTO_CARACTERISTICA_CLASS_RELACION'
    )
AND VALOR1 = (SELECT ID_PRODUCTO_CARACTERISITICA FROM DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA WHERE ESTADO = 'Activo'
    AND PRODUCTO_ID = (SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo')
    AND CARACTERISTICA_ID = (SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA WHERE DESCRIPCION_CARACTERISTICA = 'Cantidad IPs' AND ESTADO = 'Activo'));

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'Cantidad IPs'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'Cantidad IPs' AND ESTADO = 'Activo' );

--DELETE CARACTERISTICA 'Cantidad IPs'
DELETE DB_COMERCIAL.ADMI_CARACTERISTICA WHERE DESCRIPCION_CARACTERISTICA = 'Cantidad IPs' AND ESTADO = 'Activo';

-- REVERSO DE LA CABECERA DE PARAMETROS DE 'PROD_Cantidad IPs'
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE
    PARAMETRO_ID = (
        SELECT
            ID_PARAMETRO
        FROM
            DB_GENERAL.ADMI_PARAMETRO_CAB
        WHERE
            NOMBRE_PARAMETRO = 'PROD_Cantidad IPs'
    );
DELETE DB_GENERAL.ADMI_PARAMETRO_CAB
WHERE
    NOMBRE_PARAMETRO = 'PROD_Cantidad IPs';

--DELETE DETALLES PARAMETROS PARA EL DEFAULT VALUE DE LA ADMI_PRODUCTO_CARACTERISTICA
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PROD_CARACTERISTICA_SELECCIONE_VALUE'
    )
AND VALOR1 = 'PROD_Cantidad IPs';

--DELETE DETALLES PARAMETROS PARA LA CLASS RELACION CON ADMI_PRODUCTO_CARACTERISTICA
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PRODUCTO_CARACTERISTICA_CLASS_RELACION'
    )
AND VALOR1 = (SELECT ID_PRODUCTO_CARACTERISITICA FROM DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA WHERE ESTADO = 'Activo'
    AND PRODUCTO_ID = (SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo')
    AND CARACTERISTICA_ID = (SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA WHERE DESCRIPCION_CARACTERISTICA = 'Security NG Firewall' AND ESTADO = 'Activo'));

--DELETE DETALLES PARAMETROS PARA LA RELACION PRODUCTO CON ADMI_PRODUCTO_CARACTERISTICA
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PRODUCTO_CARACTERISTICA_RELACION_PRODUCTO'
    )
AND VALOR1 = (SELECT ID_PRODUCTO_CARACTERISITICA FROM DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA WHERE ESTADO = 'Activo'
    AND PRODUCTO_ID = (SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo')
    AND CARACTERISTICA_ID = (SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA WHERE DESCRIPCION_CARACTERISTICA = 'Security NG Firewall' AND ESTADO = 'Activo'));

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'Security NG Firewall'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'Security NG Firewall' AND ESTADO = 'Activo' );

-- REVERSO DE LA CABECERA DE PARAMETROS DE 'PROD_Security NG Firewall'
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE
    PARAMETRO_ID = (
        SELECT
            ID_PARAMETRO
        FROM
            DB_GENERAL.ADMI_PARAMETRO_CAB
        WHERE
            NOMBRE_PARAMETRO = 'PROD_Security NG Firewall'
    );
DELETE DB_GENERAL.ADMI_PARAMETRO_CAB
WHERE
    NOMBRE_PARAMETRO = 'PROD_Security NG Firewall';

--DELETE DETALLES PARAMETROS PARA EL DEFAULT VALUE DE LA ADMI_PRODUCTO_CARACTERISTICA
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PROD_CARACTERISTICA_SELECCIONE_VALUE'
    )
AND VALOR1 = 'PROD_Security NG Firewall';

--DELETE CARACTERISTICA 'Security NG Firewall'
DELETE DB_COMERCIAL.ADMI_CARACTERISTICA WHERE DESCRIPCION_CARACTERISTICA = 'Security NG Firewall' AND ESTADO = 'Activo';

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'SEC CAPACIDAD(Kbps)'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'SEC CAPACIDAD(Kbps)' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'SEC PLAN NG FIREWALL'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'SEC PLAN NG FIREWALL' AND ESTADO = 'Activo' );

--DELETE ADMI_PRODUCTO_CARACTERISTICA 'SEC MODELO FIREWALL'
DELETE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = ( SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO
      WHERE DESCRIPCION_PRODUCTO = 'INTERNET VPNoGPON' AND ESTADO = 'Activo' )
AND CARACTERISTICA_ID = ( SELECT ID_CARACTERISTICA FROM DB_COMERCIAL.ADMI_CARACTERISTICA
      WHERE DESCRIPCION_CARACTERISTICA = 'SEC MODELO FIREWALL' AND ESTADO = 'Activo' );

-- REVERSO DE LA CABECERA DE PARAMETROS DE 'PRODUCTO_AUTOMATICO_ULTIMA_MILLA'
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE
    PARAMETRO_ID = (
        SELECT
            ID_PARAMETRO
        FROM
            DB_GENERAL.ADMI_PARAMETRO_CAB
        WHERE
            NOMBRE_PARAMETRO = 'PRODUCTO_AUTOMATICO_ULTIMA_MILLA'
    );
DELETE DB_GENERAL.ADMI_PARAMETRO_CAB
WHERE
    NOMBRE_PARAMETRO = 'PRODUCTO_AUTOMATICO_ULTIMA_MILLA';

--DELETE DETALLES PARAMETROS PARA EL DEFAULT VALUE DE LA ADMI_PRODUCTO_CARACTERISTICA
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID = (
        SELECT id_parametro
        FROM db_general.admi_parametro_cab
        WHERE nombre_parametro = 'PROD_CARACTERISTICA_SELECCIONE_VALUE'
    )
AND VALOR1 = 'PROD_SEC CAPACIDAD(Kbps)';

-- REVERSO DE LA CABECERA DE PARAMETROS DE 'CARACTERISTICA_PROD_INGRESAR_PRODUCTO'
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE
    PARAMETRO_ID = (
        SELECT
            ID_PARAMETRO
        FROM
            DB_GENERAL.ADMI_PARAMETRO_CAB
        WHERE
            NOMBRE_PARAMETRO = 'CARACTERISTICA_PROD_INGRESAR_PRODUCTO'
    );
DELETE DB_GENERAL.ADMI_PARAMETRO_CAB
WHERE
    NOMBRE_PARAMETRO = 'CARACTERISTICA_PROD_INGRESAR_PRODUCTO';

--DELETE SUBREDES
DELETE DB_INFRAESTRUCTURA.INFO_IP WHERE SUBRED_ID IN (SELECT ID_SUBRED FROM DB_INFRAESTRUCTURA.INFO_SUBRED WHERE USO = 'SAFECITYCAMVPN');
DELETE DB_INFRAESTRUCTURA.INFO_SUBRED WHERE USO = 'SAFECITYCAMVPN';

-- REVERSO DE LA CABECERA DE PARAMETROS DE 'PRODUCTO_REQUERIDO_ACTIVACION'
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE
    PARAMETRO_ID = (
        SELECT
            ID_PARAMETRO
        FROM
            DB_GENERAL.ADMI_PARAMETRO_CAB
        WHERE
            NOMBRE_PARAMETRO = 'PRODUCTO_REQUERIDO_ACTIVACION'
    );
DELETE DB_GENERAL.ADMI_PARAMETRO_CAB
WHERE
    NOMBRE_PARAMETRO = 'PRODUCTO_REQUERIDO_ACTIVACION';

-- REVERSO DE LA CABECERA DE PARAMETROS DE 'PERMITE_CAMBIO_PRECIO_INSTALACION'
DELETE DB_GENERAL.ADMI_PARAMETRO_DET
WHERE
    PARAMETRO_ID = (
        SELECT
            ID_PARAMETRO
        FROM
            DB_GENERAL.ADMI_PARAMETRO_CAB
        WHERE
            NOMBRE_PARAMETRO = 'PERMITE_CAMBIO_PRECIO_INSTALACION'
    );
DELETE DB_GENERAL.ADMI_PARAMETRO_CAB
WHERE
    NOMBRE_PARAMETRO = 'PERMITE_CAMBIO_PRECIO_INSTALACION';

COMMIT;
/
