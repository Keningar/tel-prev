/**
 * Documentación para 'DML_ROLLBACK_09072021_afayala.pks'
 * Pks que permite realizar reversos de inserción
 *
 * @author Antonio Ayala <afayala@telconet.ec>
 * @version 1.0 09-07-2021
 */

-- ELIMINAR EN ADMI_PRODUCTO_CARACTERISTICA
DELETE FROM DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
WHERE PRODUCTO_ID = (SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'SECURE CPE' AND EMPRESA_COD = '10');

-- ELIMINAR ADMI_CARACTERISTICA
DELETE FROM DB_COMERCIAL.ADMI_CARACTERISTICA
WHERE DESCRIPCION_CARACTERISTICA = 'CPE FORTI';

-- ELIMINAR EN INFO_PRODUCTO_IMPUESTO
DELETE FROM DB_COMERCIAL.INFO_PRODUCTO_IMPUESTO
WHERE PRODUCTO_ID = (SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'SECURE CPE' AND EMPRESA_COD = '10');

-- ELIMINAR EN ADMI_COMISION_DET
DELETE FROM DB_COMERCIAL.ADMI_COMISION_DET
WHERE COMISION_ID = (SELECT ID_COMISION FROM DB_COMERCIAL.ADMI_COMISION_CAB WHERE PRODUCTO_ID = (SELECT ID_PRODUCTO FROM 
                    DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'SECURE CPE' AND EMPRESA_COD = '10'));

-- ELIMINAR EN ADMI_COMISION_CAB
DELETE FROM DB_COMERCIAL.ADMI_COMISION_CAB
WHERE PRODUCTO_ID = (SELECT ID_PRODUCTO FROM DB_COMERCIAL.ADMI_PRODUCTO WHERE DESCRIPCION_PRODUCTO = 'SECURE CPE' AND EMPRESA_COD = '10');

-- ELIMINAR PRODUCTO SECURE CPE
DELETE FROM DB_COMERCIAL.ADMI_PRODUCTO
WHERE DESCRIPCION_PRODUCTO = 'SECURE CPE' AND EMPRESA_COD = '10';

-- ELIMINAR ADMI_CARACTERISTICA
DELETE FROM DB_COMERCIAL.ADMI_CARACTERISTICA
WHERE DESCRIPCION_CARACTERISTICA = 'CPE FORTI';

-- ELIMINAR ADMI_CARACTERISTICA
DELETE FROM DB_COMERCIAL.ADMI_CARACTERISTICA
WHERE DESCRIPCION_CARACTERISTICA = 'SERIE_EQUIPO_SECURE_CPE';

-- ELIMINAR ADMI_CARACTERISTICA
DELETE FROM DB_COMERCIAL.ADMI_CARACTERISTICA
WHERE DESCRIPCION_CARACTERISTICA = 'ID_SERVICIO_SECURE_CPE';

-- ELIMINAR ADMI_CARACTERISTICA
DELETE FROM DB_COMERCIAL.ADMI_CARACTERISTICA
WHERE DESCRIPCION_CARACTERISTICA = 'FECHA_EXPIRACION_SEGURIDAD_CPE';

-- ELIMINAR ADMI_CARACTERISTICA
DELETE FROM DB_COMERCIAL.ADMI_CARACTERISTICA
WHERE DESCRIPCION_CARACTERISTICA = 'SEC PLAN SECURE CPE';

COMMIT;

/

