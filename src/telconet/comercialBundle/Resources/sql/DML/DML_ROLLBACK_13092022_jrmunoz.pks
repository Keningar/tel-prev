/*
 * @author Joel Mu√±oz <jrmunoz@telconet.ec>
 * @version 1.0
 * @since 13-09-2022
 */

UPDATE DB_COMERCIAL.ADMI_PRODUCTO_CARACTERISTICA
SET ESTADO = 'Eliminado'
WHERE PRODUCTO_ID = (SELECT ID_PRODUCTO
                     FROM DB_COMERCIAL.ADMI_PRODUCTO
                     WHERE DESCRIPCION_PRODUCTO = 'SECURITY NG FIREWALL'
                       and EMPRESA_COD = '10'
                       AND ESTADO = 'Activo') AND
    CARACTERISTICA_ID IN (
        (SELECT ID_CARACTERISTICA
         FROM DB_COMERCIAL.ADMI_CARACTERISTICA
         WHERE DESCRIPCION_CARACTERISTICA = 'IP/FQDN NG FIREWALL'
           AND ESTADO = 'Activo'
           AND ROWNUM = 1),
        (SELECT ID_CARACTERISTICA
         FROM DB_COMERCIAL.ADMI_CARACTERISTICA
         WHERE DESCRIPCION_CARACTERISTICA = 'SERIAL LICENCIA NG FIREWALL'
           AND ESTADO = 'Activo'
           AND ROWNUM = 1),
        (SELECT ID_CARACTERISTICA
         FROM DB_COMERCIAL.ADMI_CARACTERISTICA
         WHERE DESCRIPCION_CARACTERISTICA = 'PUERTO ADMINISTRACION WEB NG FIREWALL'
           AND ESTADO = 'Activo'
           AND ROWNUM = 1),
        (SELECT ID_CARACTERISTICA
         FROM DB_COMERCIAL.ADMI_CARACTERISTICA
         WHERE DESCRIPCION_CARACTERISTICA = 'ADMINISTRACION NG FIREWALL'
           AND ESTADO = 'Activo'
           AND ROWNUM = 1)
        );

UPDATE DB_COMERCIAL.ADMI_CARACTERISTICA
SET ESTADO = 'Eliminado'
WHERE ADMI_CARACTERISTICA.DESCRIPCION_CARACTERISTICA IN (
      'IP/FQDN NG FIREWALL',
      'SERIAL LICENCIA NG FIREWALL',
      'PUERTO ADMINISTRACION WEB NG FIREWALL',
      'ADMINISTRACION NG FIREWALL'
);


DELETE
FROM DB_GENERAL.ADMI_PARAMETRO_DET
WHERE PARAMETRO_ID IN (SELECT ID_PARAMETRO
                       FROM DB_GENERAL.ADMI_PARAMETRO_CAB
                       WHERE NOMBRE_PARAMETRO = 'LISTA_ADMINISTRACION_PRODUCTO_NGFIREWALL'
                         AND ESTADO = 'Activo'
                         AND USR_CREACION = 'jrmunoz');



DELETE
FROM DB_GENERAL.ADMI_PARAMETRO_CAB
WHERE NOMBRE_PARAMETRO = 'LISTA_ADMINISTRACION_PRODUCTO_NGFIREWALL'
  AND ESTADO = 'Activo'
  AND USR_CREACION = 'jrmunoz';


DELETE FROM DB_GENERAL.ADMI_PARAMETRO_DET
WHERE ADMI_PARAMETRO_DET.PARAMETRO_ID = (SELECT ID_PARAMETRO
                                        FROM DB_GENERAL.ADMI_PARAMETRO_CAB
                                        WHERE NOMBRE_PARAMETRO = 'NOMBRES_CARACTERISTICAS_PRODUCTO_GRID_TECNICO'
                                          AND ESTADO = 'Activo')
AND VALOR1 = (SELECT ID_PRODUCTO
              FROM DB_COMERCIAL.ADMI_PRODUCTO
              WHERE DESCRIPCION_PRODUCTO = 'SECURITY NG FIREWALL'
                AND EMPRESA_COD = '10'
                AND ESTADO = 'Activo')
AND VALOR2 = (SELECT ID_CARACTERISTICA
              FROM DB_COMERCIAL.ADMI_CARACTERISTICA
              WHERE DESCRIPCION_CARACTERISTICA = 'SEC FW NUBES PUBLICAS'
                AND ESTADO = 'Activo')
AND ESTADO = 'Activo'
AND EMPRESA_COD = 10;




COMMIT;
/
