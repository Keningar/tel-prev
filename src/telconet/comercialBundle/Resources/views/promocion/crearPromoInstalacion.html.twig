{% extends "::layout.html.twig" %}

{% block stylesheets %}
    {{ parent() }}

    <link href="{{ asset('public/css/Datatables/jquery.dataTables.min.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('public/css/Datatables/dataTables.bootstrap4.min.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('public/css/bootstrap-v4.3/bootstrap.min.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('public/css/select2-v4.0/select2.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('public/css/jquery-ui.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('public/css/bootstrap-datetimepicker.min.css') }}" type="text/css" rel="stylesheet" />    
    <link href="{{ asset('./bundles/comercial/css/Promocion.css') }}" type="text/css" rel="stylesheet" />

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('public/js/jquery-3.2.1/jquery-3.2.1.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/jquery-ui.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/Datatables/datatables.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/Datatables/dataTables.bootstrap4.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/Datatables/dataTables.fixedColumns.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/select2-v4.0/select2.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/moment.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/bootstrap-datetimepicker.min.js') }}"></script>


    <script>
        var url_getJurisdicciones                = "{{ path('promocion_getJurisdicciones') }}";
        var url_getCantones                      = "{{ path('promocion_getCantones') }}";
        var url_getParroquias                    = "{{ path('promocion_getParroquias') }}";
        var url_getSectores                      = "{{ path('promocion_getSectores') }}";
        var url_getOlts                          = "{{ path('promocion_getOlts') }}";   
        var url_getEdificios                     = "{{ path('promocion_getEdificios') }}";
        var urlGetFormasPago                     = "{{ path('promocion_getFormasPago') }}"; 
        var urlGetPeriodos                       = "{{ path('promocion_getPeriodos') }}"; 
        var urlGetTiposNegocio                   = "{{ path('promocion_getTiposNegocio') }}"; 
        var urlGetUltimaMilla                    = "{{ path('promocion_getUltimaMilla') }}"; 
        var urlGetEstadosServ                    = "{{ path('promocion_getEstadosServ') }}"; 
        var urlGetTipoCuenta                     = "{{ path('promocion_getTipoCuenta') }}";
        var urlGetBancos                         = "{{ path('promocion_getBancos') }}";               
        var urlAjaxGuardarPromoInstalacion       = "{{ path('promocion_ajaxGuardarPromoInstalacion') }}"; 
        var urlCodigoUnico                       = "{{ path('promocion_validaCodigoUnico') }}"; 
        
    </script>

    <script src="{{ asset('public/js/bootstrap-v4.3/bootstrap.min.js') }}" type="text/javascript"></script>
    <script type="text/javascript" src="{{ asset('./bundles/comercial/js/promocion/crearPromoInstalacion_1.js?') }}"></script> 
    <script type="text/javascript" src="{{ asset('./bundles/comercial/js/promocion/crearPromoInstalacion_2.js?2') }}"></script> 
{% endblock %}
{% block contenido_izq %}
    <div class="container-fluid">        
        <div class="row">
            <div class=" page-header col-md-12">    
                <br/><h4>Promoción de Instalación&nbsp;&nbsp;<i class="fa fa-gift" ></i></h4><br/>    
            </div>
        </div>
    </div>
    
    <div class="container shadow-sm p-4 mb-4 bg-white">
      <form class="formPromoInstalacion" id="idformPromoInstalacion" novalidate onsubmit="return false;" method="POST">    
        <div class="row">
            <div class="col-md-12">
                <h6>Configuraciones Generales</h6><br />                                       
                <div id="formConfGenerales">                    
                    <div class="form-group row">
                        <div class="form-group col-md-3">
                            <label for="nombre_promocion" class="col-sm-12 col-form-label">Nombre Promoción:</label>
                            <div class="col-sm-12">                                
                                <input type="text" class="form-control input-sm" placeholder="Nombre Promocion" id="nombre_promocion" 
                                       name="nombre_promocion" style="height: 1.8rem" required >
                                <div class="invalid-feedback">
                                        Campo requerido.
                                </div>
                            </div>
                        </div>                        
                        <div class="form-group col-md-3">
                            <label for="inicio_vigencia" class="col-sm-12 col-form-label">Fecha Inicio-Vigencia:</label>
                            <div class="input-group date col-sm-12" id="datetimepickerFechaIniVigencia">
                                <input type="text" class="form-control" name="inicio_vigencia" placeholder="YYYY-MM-DD"
                                       id="inicio_vigencia" required>
                                <span class="input-group-addon">
                                    <button class="btn btn-outline-secondary button-addon1" type="button" id="button-addon1">
                                        <i class="fa fa-calendar" aria-hidden="true"></i>
                                    </button>
                                </span>
                                <div class="invalid-feedback">
                                    Campo Requerido
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label for="fin_vigencia" class="col-sm-12 col-form-label">Fecha Fin-Vigencia:</label>
                            <div class="input-group date col-sm-12" id="datetimepickerFechaFinVigencia">
                                <input type="text" class="form-control" name="fin_vigencia" placeholder="YYYY-MM-DD"
                                       id="fin_vigencia" required>
                                <div class="input-group-addon">
                                    <button class="btn btn-outline-secondary button-addon1" type="button" id="button-addon2">
                                        <i class="fa fa-calendar" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="invalid-feedback">
                                    Campo Requerido
                                </div>
                            </div>
                        </div>                            
                        <div class="form-group col-md-3">
                            <label for="tipo_negocio" class="col-sm-12 col-form-label">Tipo Negocio:</label>
                            <div class="col-sm-12">                                
                                <select class="form-control" id="tipo_negocio" name="tipo_negocio" required>                                    
                                </select>
                                <div class="invalid-feedback">
                                        Campo requerido.
                                </div>
                            </div>
                        </div>  
                    </div>   
                    
                    <div class="form-group row">                          
                        <div class="form-group col-md-3">
                            <label for="descuento" class="col-sm-12 col-form-label">Descuento:</label>
                            <div class="col-sm-12">                                
                                <input type="text" class="form-control input-sm" id="descuento" placeholder="Porcentaje %" 
                                       style="height: 1.8rem">
                                <div class="invalid-feedback">
                                        Campo requerido.
                                </div>
                                <div id='div_descuento' class='invalid-feedback' style="display:none"></div>
                            </div>
                        </div>                            
                       <div class="form-group col-md-3">                            
                            <label for="ultima_milla" class="col-sm-12 col-form-label">Última Milla:</label>                            
                            <div class="col-sm-12">
                                <select class="form-control" id="ultima_milla" required>                                    
                                </select>
                                <div class="invalid-feedback">
                                        Campo requerido.
                                </div>
                            </div>
                        </div>     
                        <div class="form-group col-md-3">                            
                            <label for="codigo_promocion" class="col-sm-12 col-form-label">Código Promoción:</label>                            
                            <div class="col-sm-12">
                                <input type="text" class="form-control input-sm" placeholder="Código Promoción" id="codigo_promocion" 
                                       name="codigo_promocion" style="height: 1.8rem" >
                                <div class="invalid-feedback">
                                        Campo requerido.
                                </div>
                            </div>
                        </div>   
                        <div class="form-group col-md-3">                                                 
                            <div class="col-sm-12">
                               <select class="form-control" id="estado_servicio" required>                                    
                               </select>
                               <div class="invalid-feedback">
                                        Campo requerido.
                               </div>
                            </div>
                        </div>                           
                    </div>
                    
                    <div class="form-group row">
                        <div class="form-group col">
                            <label for="restriccion_sectorizacion" class="col-sm-12 col-form-label">No aplica restricción de Sectorización
                                &nbsp;&nbsp;<input type="checkbox" id="check_sectorizacion" value=""></label>      
                        </div>
                    </div>                      
                    <!-- Sectorización -->
                     <div class="form-group row" id="contenedor_sectorizacion">
                            <div class="form-group col-md-3">
                                <label for="jurisdiccion" class="col-sm-12 col-form-label">Jurisdicción: &nbsp;&nbsp;
                                    <i class="fa fa-spinner fa-spin spinner_jurisdiccion" ></i></label>
                                <div class="col-sm-12">
                                    <select class="form-control" id="jurisdiccion">
                                        <option></option>
                                    </select>
                                    <br>
                                    <input type="checkbox" name="radioTodosJurisd"  id="radioTodosJurisd" value="sector"> Todos
                                </div>
                            </div>
                            <div class="form-group col-md-3">
                                <label for="canton" class="col-sm-12 col-form-label">Cantón: &nbsp;&nbsp;
                                    <i class="fa fa-spinner fa-spin spinner_canton" ></i>
                                </label>
                                <div class="col-sm-12">
                                    <select class="form-control" id="canton">
                                        <option></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group col-md-3">
                                <label for="parroquia" class="col-sm-12 col-form-label">Parroquia: &nbsp;&nbsp;
                                    <i class="fa fa-spinner fa-spin spinner_parroquia" ></i>
                                </label>
                                <div class="col-sm-12">
                                    <select class="form-control" id="parroquia">
                                        <option></option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group col-md-3">
                                <div class="col-sm-12">
                                    <label class="radio">
                                        <input type="radio" name="radio_sect_olt_edif"  id="radioSector" value="sector" checked=""> Sector&nbsp;
                                    </label>
                                    <label class="radio">
                                        <input type="radio" name="radio_sect_olt_edif" id="radioOlt" value="olt"> Olt&nbsp;
                                    </label>
                                    <label class="radio">
                                        <input type="radio" name="radio_sect_olt_edif" id="radioEdificio" value="edificio"> Edificio&nbsp;
                                        <i class="fa fa-spinner fa-spin spinner_sect_olt_edif" ></i>
                                    </label>
                                </div>     
                                <div class="col-sm-12">
                                    <div class="row">
                                        <div class="col-md-9">
                                            <select class="form-control" id="sect_olt_edif">
                                                <option></option>
                                            </select>
                                            <input type="hidden" class="form-control input-sm" id="cod_parroquia" >
                                        </div>
                                        <div class="col-md-3">
                                            <button type="button" class="btn btn-success btn btn-md btnAgregaSectorizacion" 
                                                    id="btnAgregaSectorizacion" title="Agregar"><i class="fa fa-plus-square"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row justify-content-md-center">
                            <div class="form-group col-md-8">
                                <div id="contTablaSectorizacion" class="scrollbar">
                                    <table class="table table-striped table-bordered compact table-sm" id="tablaInfSectorizacion">
                                        <thead class="thead-light">
                                            <tr>
                                                 <th><b>Jurisdicción</b></th>
                                                 <th><b>Cantón</b></th>
                                                 <th><b>Parroquia</b></th>
                                                 <th colspan="2"><b>Sector / Olt / Edificio</b></th>                                              
                                                 <th><b>Acciones</b></th>   
                                            </tr>
                                        </thead>
                                        <tbody id="tbodyInfSectorizacion">                                       
                                        </tbody>                       
                                    </table>
                                </div>
                            </div>
                        </div>             
                    <div class="form-group row">
                        <div class="form-group col-md-3">
                            <label for="forma_pago" class="col-sm-12 col-form-label">Forma de Pago:</label>
                            <div class="col-sm-12">
                                <select class="form-control" id="forma_pago" required>
                                </select>
                                <div class="invalid-feedback">
                                  Campo Requerido
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Emisores Cuentas bancarias/Tarjetas de Credito-->                                        
                    <div class="form-group col-md-12" id ="idContenedorEmisores">
                        <label class="col-sm-12 col-form-label">Información Débito Bancario:
                        </label>
                        <div class="bonder-titulo"></div>
                        <div id="contenedor_informacion_emisores" class="col-md-12">
                            <div id="contenedor_tipo_emisores">
                                <div class="col-md-12 form-group row">
                                    <div class="form-group col-md-2">
                                        <label for="tipo_emisor">Tipo Emisor</label>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="optTipoEmisor" id="optTipoEmisorTarjeta" value="Tarjeta">Tarjeta
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="optTipoEmisor" id="optTipoEmisorCtaBanco" value="Cuenta Bancaria">
                                                Cuenta Bancaria
                                            </label>
                                        </div>
                                    </div>
                                    <div id="contenedorTarjCta" class="form-group col-md-3">
                                        <label for="opcionEmisorTarCta" class="col-md-12 col-form-label">Tarjeta / Cta. Bancaria
                                            <i class="fa fa-spinner fa-spin spinner_tajeta_ctaBanco" ></i>
                                        </label>
                                        <div class="col-md-12">
                                            <select class="form-control" id="opcionEmisorTarCta">
                                            </select>
                                        </div>
                                    </div>
                                    <div id="contenedorBanco" class="form-group col-md-3">
                                        <label for="opcionEmisorBanco" class="col-md-12 col-form-label">Banco
                                            <i class="fa fa-spinner fa-spin spinner_banco" ></i>
                                        </label>
                                        <div class="col-md-12">
                                            <select class="form-control" id="opcionEmisorBanco">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label col-form-label class="col-sm-12">Todos</label>
                                        <div class="col-sm-12">
                                            <label class="radio">
                                                <input type="radio" name="optTipoTodos" id="optTipoSi" value="Si">Si&nbsp;
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="optTipoTodos" id="optTipoNo" value="No">No
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-2">
                                        <div class="col-md-12">
                                            <label for="btnAgregaEmisor" class="col-sm-12 col-form-label">&nbsp;</label>
                                            <button type="button" class="btn btn-success btn btn-md btnAgregaEmisor" id="btnAgregaEmisor" 
                                                    title="Agregar"><i class="fa fa-plus-square"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div id="contenedorTablaEmisor" class="form-group row scrollbar">
                                    <table class="table table-striped table-bordered compact table-sm" id="tablaInformacionEmisores">
                                        <thead class="thead-light">
                                            <tr>
                                                <th>Tipo</th>
                                                <th>Tarjeta/Cta.Bancaria</th>
                                                <th>Banco</th>
                                                <th>Acción</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbodyInformacionEmisores">
                                        </tbody>                       
                                    </table>
                                </div>
                            </div>          
                        </div>
                    </div>
                    
                    <!-- Periodos -->  
                     <div class="form-group row">  
                        <div class="form-group col-md-9">                           
                           <div class="form-group">
                               <div>
                                    <button type="button" class="btn btn-outline-info btn-sm collapsed glyphicon glyphicon-chevron-up" 
                                            data-toggle="collapse" aria-expanded="false" data-target="#contenedor_periodos">
                                        <i class="fa fa-angle-down"></i>
                                    </button>
                                   <label>&nbsp;Diferido</label>
                                </div>
                           </div>                           
                           <div id="contenedor_periodos" class="collapse form-group col-md-12">
                                <div id="check_periodos">
                                </div>
                            </div>
                       </div>                                                      
                    </div>    
                    
               </div>
            </div>         
        </div>  
        <br />        
        <div class="row justify-content-center">                          
           <div class="col-md-3 offset-1">  
               <i class="fa fa-spinner fa-spin spinner_guardarPromocion" ></i>
               <button type="submit" class="btn btn-primary btn-sm" id="guardarPromociones">Guardar</button>    
               <button type="button" class="btn btn-secondary btn-sm" id="limpiarPromocion">Limpiar</button>
            </div>
        </div>
      </form>	
      <div class="modal fade" id="modalMensajes" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Mensaje Promoción</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>          
    </div>
{% endblock contenido_izq %}
{% block contenido_der %}
    <div class="titulo-acciones-relacionadas">
        Acciones Relacionadas
    </div>
    <ul class="listado_acciones_relacionadas"> 
        <li>
            <a href="{{path('promocion_index')}}">Consulta de Promociones</a>
        </li>
    </ul>
{% endblock contenido_der %}