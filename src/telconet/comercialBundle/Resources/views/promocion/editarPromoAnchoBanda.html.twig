{% extends "::layout.html.twig" %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('public/css/Datatables/jquery.dataTables.min.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('public/css/Datatables/dataTables.bootstrap4.min.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('public/css/bootstrap-v4.3/bootstrap.min.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('public/css/select2-v4.0/select2.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('public/css/jquery-ui.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('public/css/bootstrap-datetimepicker.min.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('./bundles/comercial/css/Promocion.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('public/js/jquery-3.2.1/jquery-3.2.1.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/jquery-ui.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/Datatables/datatables.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/Datatables/dataTables.bootstrap4.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/Datatables/dataTables.fixedColumns.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/select2-v4.0/select2.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/moment.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('public/js/bootstrap-datetimepicker.min.js') }}"></script>
    <script src="{{ asset('public/js/bootstrap-v4.3/bootstrap.min.js') }}" type="text/javascript"></script>
    <script type="text/javascript" src="{{ asset('./bundles/comercial/js/promocion/editarPromoAnchoBanda.js?3') }}"></script>
    <script type="text/javascript" src="{{ asset('./bundles/comercial/js/promocion/infoPromoAnchoBanda.js?2') }}"></script>
    <script>
        var url_getJurisdicciones                   = "{{ path('promocion_getJurisdicciones') }}";
        var url_getCantones                         = "{{ path('promocion_getCantones') }}";
        var url_getParroquias                       = "{{ path('promocion_getParroquias') }}";
        var url_getSectores                         = "{{ path('promocion_getSectores') }}";
        var url_getOlts                             = "{{ path('promocion_getOlts') }}";
        var url_getEdificios                        = "{{ path('promocion_getEdificios') }}";
        var urlGetFormasPago                        = "{{ path('promocion_getFormasPagoSelect') }}";
        var urlGetTipoClientes                      = "{{ path('promocion_getTipoClientes') }}";
        var urlGetPeriodos                          = "{{ path('promocion_getPeriodosSelect') }}";
        var urlGetTiposNegocio                      = "{{ path('promocion_getTiposNegocioSelect') }}";
        var urlGetUltimaMilla                       = "{{ path('promocion_getUltimaMillaSelect') }}";
        var urlGetEstadosServ                       = "{{ path('promocion_getEstadosSelect') }}";
        var url_GetPlanes                           = "{{ path('promocion_getPlanes') }}";
        var url_GetPlanesNoSeleccionados            = "{{ path('promocion_getPlanesNoSeleccionados') }}";
        var url_GetPlanesDestino                    = "{{ path('promocion_getPlanesDestino') }}";
        var urlGetTipoCuenta                        = "{{ path('promocion_getTipoCuenta') }}";
        var urlGetBancos                            = "{{ path('promocion_getBancos') }}";
        var urlGetAntiguedad                        = "{{ path('promocion_getAntiguedad') }}";
        var url_editar_promo_ancho_banda            = "{{ path('promocion_editarPromoAnchoBanda') }}";
        var url_datos_gene_promo                    = "{{ path('promocion_getDatosGenePromo') }}";
        var url_promocion_planes_promo              = "{{ path('promocion_getPlanesPromo') }}";
        var url_promocion_emisores_promo            = "{{ path('promocion_getEmisoresPromo') }}";
        var urlCodigoUnico                          = "{{ path('promocion_validaCodigoUnico') }}";
        var url_getBeneficiariosOlt                 = "{{ path('promocion_beneficiariosOlt') }}";
        {% for DatosGenerales in objPromocion['arrayDatosGeneralesPromo'] %}
        var strTipoCliente                          = "{{ DatosGenerales['tipoCliente'] }}";
        var strFechaInicio                          = "{{ DatosGenerales['feInicioVigencia'] }}";
        var strFechaFin                             = "{{ DatosGenerales['feFinVigencia'] }}";
        var strEstadoPromocion                      = "{{ DatosGenerales['estado'] }}";
        {% endfor %}
        var urlGetMotivos                        = "{{ path('promocion_getMotivos') }}"; 
        var strUrlListaPromo                     = '{{ path('promocion_index') }}';
        var url_graba_promo_ancho_banda          = "{{ path('promocion_graba_promo_ancho_banda') }}";
        var strTipoEdicion                       = "{{ objPromocion['strTipoEdicion']}}";
        var strFechaEditar                       = "{{ objPromocion['strFechaEditar']}}";
        {% if objPromocion['strTipoEdicion'] =='ED' %}
             url_editar_promo_ancho_banda        = "{{ path('promocion_editarPromoMensualidadVigente') }}";
        {% endif %}
    </script>

{% endblock %}
{% block contenido_izq %}
    <div class="container-fluid">
        <div class="row">
            <div class=" page-header col-md-12">
                <br/><h4>Editar Promoción de Ancho de Banda <i class="fa fa-rss" aria-hidden="true"></i></h4><br/>
            </div>
            <div class="alert alert-danger col-sm-8" id="alertaConfirmaGuardar" role="alert" style="display:none;" >
                <strong></strong>
            </div>
        </div>
    </div>
    <div class="container shadow-sm p-4 mb-4 bg-white">
        <div class="row">
            <div class="col-md-12">
                <form class="formPromoAnchoBanda" novalidate onsubmit="return false;" method="POST">
                    <div  class="form-group row">
                        <div class="form-group col-md-5">
                            <input type="hidden" name="idPromocion" id="idPromocion" value="{{objPromocion['intIdPromocion']}} "/>
                            <label for="nombre" class="col-sm-12 col-form-label">Nombre: </label>
                            <div class="col-sm-12">
                                <input class="form-control" type="text" name="nombre" id="nombre" maxlength="50"
                                       placeholder="Nombre Promoción" required>
                                <div class="invalid-feedback">
                                  Campo Requerido.
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-4" style="display: none;">
                            <label for="antiguedad" class="col-sm-12 col-form-label">Antigüedad: </label>
                            <div id="div_antiguedad" class="col-sm-12">
                                <input class="inputAntiguedad form-control" type="number" min="0" name="antiguedad"
                                       id="antiguedad" placeholder="Número en Meses">
                                <!--div class="invalid-feedback"> poner required
                                    Campo Requerido.
                                </div-->
                            </div>
                        </div>
                        <div class="form-group col-md-4 cont_tipoCliente" style="display: none;">
                            <label for="tipo_cliente" class="col-sm-12 col-form-label">Tipo Servicio:
                              <i class="fa fa-spinner fa-spin spinner_tipoCliente" ></i>
                            </label>
                            <div class="col-sm-12">
                                <select class="form-control" id="tipo_cliente" multiple="multiple">   
                                </select>
                                <!--div class="invalid-feedback"> poner required
                                    Campo Requerido.
                                </div-->
                            </div>
                        </div>
                    </div>
                    <div class="form-group row" style="display: none;">
                        <div class="form-group col-md-4">
                            <label for="ultima_milla" class="col-sm-12 col-form-label">Última Milla: </label>
                            <div class="col-sm-12">
                                <select class="form-control" name="ultima_milla" id="ultima_milla">
                                </select>
                                <!--div class="invalid-feedback"> poner required
                                    Campo Requerido.
                                </div-->
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="estado_servicio" class="col-sm-12 col-form-label">Estado Servicio: </label>
                            <div class="col-sm-12">
                                <select class="form-control" name="estado_servicio" id="estado_servicio">
                                </select>
                                <!--div class="invalid-feedback"> poner required
                                    Campo Requerido.
                                </div-->
                            </div>
                        </div>
                        <div class="form-group col-md-4">                            
                            <label for="codigo_promocion" class="col-sm-12 col-form-label">Código Promoción:</label>                            
                            <div class="col-sm-12">
                                <input type="text" class="form-control input-sm" placeholder="Código Promoción" id="codigo_promocion" 
                                       name="codigo_promocion" style="height: 1.8rem" >
                                  <input type="hidden" id="codigo_promocion_ingresado"  name="codigo_promocion_ingresado" value='' >
                                <!--div class="invalid-feedback"> poner required
                                    Campo Requerido.
                                </div-->
                            </div>
                        </div> 
                    </div>
                    <div class="form-group row" style="margin-bottom: 0%; padding-bottom: 0%;">
                        <div class="col-md-6 text-center">
                            <label class="col-sm-6">
                                <h5>Fecha Vigencia: </h5>
                            </label>
                        </div>
                        <div class="col-md-6 text-center">
                            <label class="col-sm-6">
                                <h5>Franja Horaria: </h5>
                            </label>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="form-group col-md-3">
                            <label for="fechaIniVigencia" class="col-sm-12 col-form-label">Fecha Inicio:
                            </label>
                            <div class="input-group date col-sm-12" id="datetimepickerFechaIniVigencia">
                                <input type="text" class="form-control" name="fechaIniVigencia" placeholder="YYYY-MM-DD"
                                    id="fechaIniVigencia" value ="" required>
                                <span class="input-group-addon">
                                    <button class="btn btn-outline-secondary button-addon1" type="button" id="button-addon1">
                                        <i class="fa fa-calendar" aria-hidden="true"></i>
                                    </button>
                                </span>
                                <div class="invalid-feedback">
                                  Campo Requerido.
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label for="fechaFinVigencia" class="col-sm-12 col-form-label">Fecha Fin: </label>
                            <div class="input-group date col-sm-12" id="datetimepickerFechaFinVigencia">
                                <input type="text" class="form-control" name="fechaFinVigencia" placeholder="YYYY-MM-DD"
                                       id="fechaFinVigencia" value ="" required>
                                <div class="input-group-addon">
                                    <button class="btn btn-outline-secondary" type="button" id="button-addon2">
                                        <i class="fa fa-calendar" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="invalid-feedback">
                                  Campo Requerido.
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label for="hora_ini" class="col-sm-12 col-form-label">Hora Inicio:</label>
                            <div class="input-group date col-sm-12" id="fechaIniHora">
                                <input type="text" class="form-control" name="hora_ini" placeholder="HH"
                                       id="hora_ini" required>
                                <div class="input-group-addon">
                                    <button class="btn btn-outline-secondary" type="button" id="button-horaon1">
                                        <i class="fa fa-clock-o" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="invalid-feedback">
                                    Campo Requerido
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label for="hora_fin" class="col-sm-12 col-form-label">Hora Fin:</label>
                            <div class="input-group date col-sm-12" id="fechaFinHora">
                                <input type="text" class="form-control" name="hora_fin" placeholder="HH"
                                       id="hora_fin" required>
                                <div class="input-group-addon">
                                    <button class="btn btn-outline-secondary" type="button" id="button-horaon2">
                                        <i class="fa fa-clock-o" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="invalid-feedback">
                                    Campo Requerido
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row" style="display: none;">
                        <div class="form-group col-md-3">
                            <div class="form-group col-sm-12">
                                <div>
                                    <button type="button" id = "idBtnPeriodo" class="btn btn-outline-info btn-sm collapsed glyphicon
                                            glyphicon-chevron-up"
                                            data-toggle="collapse" aria-expanded="false" data-target="#contenedor_periodos">
                                        <i class="fa fa-angle-down"></i>
                                    </button>
                                    <label>Período</label>
                                </div>
                            </div>
                            <div id="contenedor_periodos" class="collapse form-group col-sm-12">
                                <div id="check_periodos">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row" style="display: none;">
                           {%if objPromocion['strTipoEdicion'] == 'ED' %}
                            <div class="form-group col-md-3">
                                <label for="motivo_inactivar" class="col-sm-2 col-form-label">Motivo:
                                    <i class="fa fa-spinner fa-spin spinner_motivoInactivar" ></i></label>
                                <div class="col-sm-12">
                                    <select id="motivo_inactivar_vigente" class="form-control">                                    
                                    </select>
                                    <!--div class="invalid-feedback"> poner required
                                        Campo Requerido.
                                    </div-->
                                </div>
                            </div>                           

                            <div class="form-group col-md-3">
                                <label for="observacion_inactivar" class="col-sm-2 col-form-label">Observación:</label>
                                <div class="col-sm-12">
                                    <textarea class="form-control" id="observacion_inactivar_vigente" name="observacion_inactivar" rows="2"></textarea>
                                    <!--div class="invalid-feedback"> poner required
                                        Campo Requerido.
                                    </div-->
                                </div>
                            </div>
                        {% endif %}   
                    </div>
                    {%if  objPromocion['intIdOrigen']!='N' %} 
                        <div class="accordion container-fluid" id="accordionExample">
                            <div class="card" style="border-bottom:1px solid rgba(0,0,0,.125)">
                                <div class="card-header" id="promocionMix">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapsePromocionMix" aria-expanded="false" 
                                                aria-controls="collapsePromocionMix"> Detalles Promoción Origen - {{objPromocionOrigen['objAdmiGrupoPromocion'].nombreGrupo}}<i class="fa fa-angle-down"></i>
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapsePromocionMix" class="collapse" aria-labelledby="promocionMix" data-parent="#accordionExample">
                                    <div class="card-body">
                                    <table class="table compact" width='100%' border='0'>          
                                        <tbody>           
                                            <tr>
                                                <td><b>Fecha Inicio Vigencia:</b></td>
                                                <td>{{objPromocionOrigen['objAdmiGrupoPromocion'].feInicioVigencia| date('j. F Y')}}</td>
                                                <td><b>Fecha Fin Vigencia:</b></td>
                                                <td>{{objPromocionOrigen['objAdmiGrupoPromocion'].feFinVigencia| date('j. F Y')}}</td> 
                                            </tr>
                                            <tr>         
                                                <td><b>Última Milla:</b></td>
                                                <td>{{objPromocionOrigen['arrayCaracteristicas'].strUltimaMilla}} </td>
                                                <td><b>Tipo Negocio:</b></td>
                                                <td>{{objPromocionOrigen['arrayCaracteristicas'].strTipoNegocio}} </td>
                                            </tr>
                                            <tr>         
                                                <td><b>Período(s):</b></td>
                                                <td>{{objPromocionOrigen['arrayCaracteristicas'].strPeriodo}} </td>
                                                <td><b>Forma de Pago:</b></td>
                                                <td>{{objPromocionOrigen['arrayCaracteristicas'].strFormaPago}} </td>
                                            </tr>   
                                        </tbody>
                                    </table>
                                    </div>    
                                </div>    
                                </div>    
                        </div>  
                    {% endif %}    
                    <div class="form-group row"> 
                        <div class="form-group col">
                            <label for="restriccion_sectorizacion" class="col-sm-12 col-form-label">
                                No aplica restricción de Sectorización &nbsp;&nbsp;
                                <input type="checkbox" id="check_sectorizacion" value=""></label>
                        </div>
                    </div>
                    <div class="form-group row" id="contenedor_sectorizacion">
                        <div class="form-group col-md-3">
                            <label for="jurisdiccion" class="col-sm-12 col-form-label">Jurisdicción: &nbsp;&nbsp;
                                <i class="fa fa-spinner fa-spin spinner_jurisdiccion" ></i></label>
                            <div class="col-sm-12">
                                <select class="form-control" id="jurisdiccion">
                                    <option></option>
                                </select>
                                <br>
                                <input type="checkbox" name="radioTodosJurisd"  id="radioTodosJurisd" value="sector"> Todos
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label for="canton" class="col-sm-12 col-form-label">Cantón: &nbsp;&nbsp;
                                <i class="fa fa-spinner fa-spin spinner_canton" ></i>
                            </label>
                            <div class="col-sm-12">
                                <select class="form-control" id="canton">
                                    <option></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label for="parroquia" class="col-sm-12 col-form-label">Parroquia: &nbsp;&nbsp;
                                <i class="fa fa-spinner fa-spin spinner_parroquia" ></i>
                            </label>
                            <div class="col-sm-12">
                                <select class="form-control" id="parroquia">
                                    <option></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <div class="col-sm-12">
                                <label class="radio">
                                    <input type="radio" name="radio_sect_olt_edif"  id="radioSector" value="sector" checked=""> Sector&nbsp;
                                </label>
                                <label class="radio">
                                    <input type="radio" name="radio_sect_olt_edif" id="radioOlt" value="olt"> Olt&nbsp;
                                </label>
                                <label class="radio">
                                    <input type="radio" name="radio_sect_olt_edif" id="radioEdificio" value="edificio"> Edificio&nbsp;
                                    <i class="fa fa-spinner fa-spin spinner_sect_olt_edif" ></i>
                                </label>
                            </div>     
                            <div class="col-sm-12">
                                <div class="row">
                                    <div class="col-md-9">
                                        <select class="form-control" id="sect_olt_edif">
                                            <option></option>
                                        </select>
                                        <input type="hidden" class="form-control input-sm" id="cod_parroquia" >
                                    </div>
                                    <div class="col-md-3">
                                        <button type="button" class="btn btn-success btn btn-md btnAgregaSectorizacion" 
                                                id="btnAgregaSectorizacion" title="Agregar"><i class="fa fa-plus-square"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                         
                    <div class="form-group row justify-content-md-center">
                        <div class="form-group col-md-8">
                            <div id="contTablaSectorizacion" class="scrollbar">
                                <table class="table table-striped table-bordered compact table-sm" id="tablaInfSectorizacion">
                                    <thead class="thead-light">
                                        <tr>
                                            <th><b>Jurisdicción</b></th>
                                            <th><b>Cantón</b></th>
                                            <th><b>Parroquia</b></th>
                                            <th colspan="2"><b>Sector / Olt / Edificio</b></th>
                                            <th><b>N. Beneficiarios</b></th>
                                            <th><b>Acciones</b></th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbodyInfSectorizacion">
                                        {% for Sectorizacion in objPromocion['arraySectorizacion'] %}
                                            <tr>
                                                <td style="display:none;">{{ Sectorizacion['intJurisdiccion'] }}</td>
                                                <td style="display:none;">{{ Sectorizacion['intCanton'] }}</td>
                                                <td style="display:none;">{{ Sectorizacion['intParroquia'] }}</td>
                                                <td style="display:none;">{{ Sectorizacion['strSectOltEdif'] }}</td>
                                                <td style="display:none;">{{ Sectorizacion['intSectOltEdif'] }}</td>
                                                <td style="display:none;">{{ Sectorizacion['intSectorizacion'] }}</td>
                                                <td>{{ Sectorizacion['strJurisdiccion'] }}</td>
                                                <td>{{ Sectorizacion['strCanton'] }}</td>
                                                <td>{{ Sectorizacion['strParroquia'] }}</td>
                                                <td>{{ Sectorizacion['strSectOltEdif'] }}</td>
                                                <td>{{ Sectorizacion['strSectorOltEdif'] }}</td>
                                                <td class="beneficiarios"> 0 </td>
                                                <td class="actions">
                                                    <button title="Limpiar" type="button" class="btn btn-danger btn btn-sm btnEliminarSectorizacion"
                                                            id="btnEliminarSectorizacion">
                                                        <i class="fa fa-times-circle-o" aria-hidden="true">
                                                        </i>
                                                    </button>
                                                </td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row justify-content-md-center">
                        <div class="form-group col-md-8">
                            <div id="conTotalBeneficiarios" class="scrollbar">
                                <table class="table table-striped table-bordered compact table-sm" id="tablaTotalBeneficiarios">
                                    <thead class="thead-light">
                                        <tr>
                                            <th colspan="2"><b>Total de Beneficiarios</b></th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbodyTotalBeneficiarios">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    {%if  objPromocion['intIdOrigen']!='N' %}            
                        <div class="accordion container-fluid" id="accordionExample">                   
                            <div class="card" style="border-bottom:1px solid rgba(0,0,0,.125)">
                                <div class="card-header" id="promocionMix">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapsePromocionMix" aria-expanded="false" 
                                                aria-controls="collapsePromocionMix"> Detalles Sectorización Origen - {{objPromocionOrigen['objAdmiGrupoPromocion'].nombreGrupo}}<i class="fa fa-angle-down"></i>
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapsePromocionMix" class="collapse" aria-labelledby="promocionMix" data-parent="#accordionExample">
                                    <div class="card-body">
                                
                                    <table class="table table-striped table-bordered compact table-sm" id="tablaInfSectorizacionO">  
                                            <thead class="thead-light">
                                                <tr>
                                                    <th><b>Jurisdicción</b></th>
                                                    <th><b>Cantón</b></th>
                                                    <th><b>Parroquia</b></th>
                                                    <th colspan="2"><b>Sector / Olt / Edificio</b></th>                              
                                                </tr>
                                            </thead>
                                            <tbody id="tbodyInfSectorizacion">
                                                {% if objPromocionOrigen['arrayCaracteristicas'].arraySectorizacion is defined and 
                                                    objPromocionOrigen['arrayCaracteristicas'].arraySectorizacion is not empty %}    
                                                    {% for Sectorizacion in objPromocionOrigen['arrayCaracteristicas'].arraySectorizacion %}
                                                    <tr>
                                                        <td>{{ Sectorizacion['strJurisdiccion'] }}</td>
                                                        <td>{{ Sectorizacion['strCanton'] }}</td>
                                                        <td>{{ Sectorizacion['strParroquia'] }}</td>
                                                        <td>{{ Sectorizacion['strOptSectOltEdif'] }}</td>
                                                        <td>{{ Sectorizacion['strSectOltEdif'] }}</td>
                                                    </tr>
                                                {% endfor %}
                                                {% else %}
                                                <tr>
                                                <td>Todos</td>
                                                <td>Todos</td>
                                                <td>Todos</td>
                                                <td>Todos</td>                          
                                                </tr>
                                                {% endif %}    
                                            </tbody>
                                        </table>
                                    </div>    
                                </div>    
                            </div>    
                        </div>   
                    {% endif %}    
                    <div class="form-group row" style="display: none;">
                        <div class="form-group col-md-3">
                            <label for="forma_pago" class="col-sm-12 col-form-label">Forma de Pago:</label>
                            <div class="col-sm-12">
                                <select class="form-control" id="forma_pago">
                                </select>
                                <!--div class="invalid-feedback"> poner required
                                  Campo Requerido.
                                </div-->
                            </div>
                        </div>
                    </div>
                    <!--INI_EMISORES-->
<!--******************************************************************************************************-->
                    <div class="form-group col-md-12" id ="idContenedorEmisores" style="display: none;">
                        <label class="col-sm-12 col-form-label">Información Débito Bancario: 
                        </label>
                        <div class="bonder-titulo"></div>
                        <div id="contenedor_informacion_emisores" class="col-md-12">
                            <div id="contenedor_tipo_emisores">
                                <div class="col-md-12 form-group row">
                                    <div class="form-group col-md-2">
                                        <label for="tipo_emisor">Tipo Emisor</label>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="optTipoEmisor" id="optTipoEmisorTarjeta" value="Tarjeta">
                                                Tarjeta
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" name="optTipoEmisor" id="optTipoEmisorCtaBanco" value="Cuenta Bancaria">
                                                Cuenta Bancaria
                                            </label>
                                        </div>
                                    </div>
                                    <div id="contenedorTarjCta" class="form-group col-md-3">
                                        <label for="opcionEmisorTarCta" class="col-md-12 col-form-label">Tarjeta / Cta. Bancaria
                                            <i class="fa fa-spinner fa-spin spinner_tajeta_ctaBanco" ></i>
                                        </label>
                                        <div class="col-md-12">
                                            <select style="width:100% !important" class="form-control" id="opcionEmisorTarCta">
                                            </select>
                                        </div>
                                    </div>
                                    <div id="contenedorBanco" class="form-group col-md-3">
                                        <label for="opcionEmisorBanco" class="col-md-12 col-form-label">Banco
                                            <i class="fa fa-spinner fa-spin spinner_banco" ></i>
                                        </label>
                                        <div class="col-md-12">
                                            <select style="width:100% !important" class="form-control" id="opcionEmisorBanco">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label col-form-label class="col-sm-12">Todos</label>
                                        <div class="col-sm-12">
                                            <label class="radio">
                                                <input type="radio" name="optTipoTodos" id="optTipoSi" value="Si">Si&nbsp;
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="optTipoTodos" id="optTipoNo" value="No">No
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-2">
                                        <div class="col-md-12">
                                            <label for="btnAgregaEmisor" class="col-sm-12 col-form-label">&nbsp;</label>
                                            <button type="button" class="btn btn-success btn btn-md btnAgregaEmisor" id="btnAgregaEmisor"
                                                    title="Agregar"><i class="fa fa-plus-square"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div id="contenedorTablaEmisor" class="form-group row scrollbar col-md-10 offset-md-1">
                                    <table class="table table-striped table-bordered compact table-sm" id="tablaInformacionEmisores">
                                        <thead class="thead-light">
                                            <tr>
                                                <th><b>Tipo</b></th>
                                                <th><b>Tarjeta/Cta.Bancaria</b></th>
                                                <th><b>Banco</b></th>
                                                <th><b>Acción</b></th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbodyInformacionEmisores">
                                            {% for Emisores in objPromocion['arrayEmisores'] %}
                                                <tr>
                                                    <td style="display:none;">{{ Emisores['idTipoCuenta'] }}</td>
                                                    <td style="display:none;">{{ Emisores['idBanco'] }}</td>
                                                    <td>{{ Emisores['esTarjeta'] }}</td>
                                                    <td>{{ Emisores['descCuenta'] }}</td>
                                                    <td>{{ Emisores['descBanco'] }}</td>
                                                    <td class="actions">
                                                        <button title="Limpiar" type="button" class="btn btn-danger btn btn-sm btnEliminarEmisor"
                                                                id="btnEliminarEmisor">
                                                            <i class="fa fa-times-circle-o" aria-hidden="true">
                                                            </i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>          
                        </div>
                    </div>
                    {%if  objPromocion['intIdOrigen']!='N' %}     
                        <div class="accordion container-fluid" id="accordionExample">                   
                            <div class="card" style="border-bottom:1px solid rgba(0,0,0,.125)">
                                <div class="card-header" id="promocionMix">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapsePromocionMix" aria-expanded="false" 
                                                aria-controls="collapsePromocionMix"> Detalles Débito Bancario Origen - {{objPromocionOrigen['objAdmiGrupoPromocion'].nombreGrupo}}<i class="fa fa-angle-down"></i>
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapsePromocionMix" class="collapse" aria-labelledby="promocionMix" data-parent="#accordionExample">
                                    <div class="card-body">
                                    <div id="contenedor_ver_sector" class="form-group row scrollbar">   
                                        <table class="table table-striped table-bordered compact table-sm" id="tablaInformacionEmisoresO">
                                            <thead class="thead-light"> 
                                                <tr>
                                                    <th width="15%">Tipo</th>
                                                    <th>Tarjeta/Cta.Bancaria</th>
                                                    <th>Banco</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbodyInformacionEmisores2">
                                                {% if objPromocionOrigen['arrayEmisores']  is empty %}
                                                    <td colspan="3"> NO POSEE</td>
                                                {% else %}     
                                                {% for Emisores in objPromocionOrigen['arrayEmisores'] %}
                                                    <tr>
                                                        <td>{{ Emisores['esTarjeta'] }}</td>
                                                        <td>{{ Emisores['descCuenta'] }}</td>
                                                        <td>{{ Emisores['descBanco'] }}</td>
                                                    </tr>
                                                {% endfor %}
                                                {% endif %}  
                                            </tbody>
                                        </table>
                                    </div>       
                                    </div>    
                                </div>    
                            </div>    
                        </div>  
                    {% endif %}                   
                    <!--FIN_EMISORES-->
<!--******************************************************************************************************-->
                    <div class="form-group row" style="display: none;">
                        <div class="form-group col-md-3">
                            <label  for="tipo_negocio" class="col-sm-12 col-form-label">Tipo Negocio: </label>
                            <div class="col-sm-12">
                                <select class="form-control" name="tipo_negocio" id="tipo_negocio">
                                </select>
                                <!--div class="invalid-feedback"> poner required
                                  Campo Requerido.
                                </div-->
                            </div>
                        </div>
                    </div>
                    <!--INI_PLANES-->
<!--******************************************************************************************************-->
                    <div class="col-md-12 form-group row">
                        <div class="form-group col-md-5">
                                <label for="idPlan" class="col-md-12 col-form-label">Plan: </label>
                                <div class="col-md-12">
                                <select style="width:100% !important" class="form-control select2-container" id="idPlan">
                                    <option></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group col-md-5">
                            <label for="idPlanSuperior" class="col-md-12 col-form-label">Plan Nuevo: </label>
                            <div class="col-md-12">
                                <select style="width:100% !important" class="form-control select2-container" id="idPlanSuperior">
                                    <option></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group col-md-2">
                            <div class="col-md-12">
                                <label for="btnAgregarPlan" class="col-sm-12 col-form-label">&nbsp;</label>
                                <button type="button" class="btn btn-success btn btn-md btnAgregarPlan" id="btnAgregarPlan"
                                        title="Agregar"><i class="fa fa-plus-square"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row justify-content-md-center">
                        <div class="form-group col-md-8">
                            <div id="contenedorInformacionPlanes" class="scrollbar">
                                <table class="table table-striped table-bordered compact table-sm" id="tablaInformacionPlanes">
                                    <thead class="thead-light">
                                        <tr>
                                            <th><b>Plan</b></th>
                                            <th><b>Plan Nuevo</b></th>
                                            <th><b>Acción</b></th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbodyInformacionPlanes">
                                        {% for Planes in objPromocion['arrayPlanes'] %}
                                            <tr>
                                                <td style="display:none;">{{ Planes['idPlan'] }}</td>
                                                <td style="display:none;">{{ Planes['idPlanSuperior'] }}</td>
                                                <td style="display:none;">{{ Planes['idTipoPlanProdPromo'] }}</td>
                                                <td style="display:none;">{{ Planes['lineProfile'] }}</td>
                                                <td>{{ Planes['nombrePlan'] }} - [{{ Planes['idPlan'] }}]</td>
                                                <td>{{ Planes['nombrePlanSuperior'] }} - [{{ Planes['idPlanSuperior'] }}]</td>
                                                <td class="actions">
                                                    <button title="Limpiar" type="button" class="btn btn-danger btn btn-sm btnEliminarEmisor"
                                                            id="btnEliminarPlan">
                                                        <i class="fa fa-times-circle-o" aria-hidden="true">
                                                        </i>
                                                    </button>
                                                </td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
<!--******************************************************************************************************-->
                    <!--FIN_PLANES-->
                    <div class="modal fade" id="modalMensajes" role="dialog">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Mensaje Promoción</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Cerrar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div>
                            <i class="fa fa-spinner fa-spin spinner_guardarPromocion" ></i>
                            <button type="submit" class="btn btn-primary btn-sm" id="btnGuardarPromocion">Guardar</button>
                             <input id='id_grupo_promocion' name='id_grupo_promocion' type='hidden' value='{{objPromocion['intIdPromocion']}}'>    
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock contenido_izq %}
{% block contenido_der %}
    <div class="titulo-acciones-relacionadas">
        Acciones Relacionadas
    </div>
    <ul class="listado_acciones_relacionadas"> 
        <li>
            <a href="{{path('promocion_index')}}">Consulta de Promociones</a>
        </li>
    </ul>
{% endblock contenido_der %}