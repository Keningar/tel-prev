{% extends "::layout_completo.html.twig" %}

{% block stylesheets %}
	{{ parent() }}
        
 	<style scoped="scoped">
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
  map_canvas { height: 100% }
	</style> 		
{% endblock %}

{% block javascripts%}
	{{ parent() }}      
        
        <script type="text/javascript" src="{{ asset('./bundles/comercial/js/infopunto/seleccionEdificio.js?3') }}"></script>
	<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>        
        <script>         
            url_formas_contacto_persona =   "{{ path('infopunto_formas_contacto_grid') }}";
            url_formas_contacto         =   "{{path('cliente_lista_formas_contacto')}}";
            personaid                   =   "{{entity.id}}";            
            url_valida_login            =   "{{ path('infopunto_ajax_valida_login') }}";
            url_genera_login            =   "{{ path('infopunto_ajax_genera_login') }}";
            clienteId                   =   "{{cliente.id}}";
            url_img_loader              =   "{{ asset('public/images/images_crud/ajax-loader.gif') }}";
            url_img_check               =   "{{ asset('public/images/check.png') }}";
            url_img_delete              =   "{{ asset('public/images/delete.png') }}";
            url_puntoscobertura         =   "{{ path('infopunto_ajax_get_puntos_cobertura') }}";
            url_cantones                =   "{{ path('infopunto_ajax_get_cantones_jurisdiccion') }}";
            url_lista_parroquias        =   '{{path('cliente_ajax_lista_parroquias')}}';
            url_lista_sectores          =   '{{path('cliente_ajax_lista_sectores')}}';
            url_vendedores              =   '{{path('infopunto_ajax_lista_vendedores')}}';			
            url_modelo                  =   "{{path("elementoNodoCliente_modelosPorTipoElemento") }}";
            strUrlTipoOrigenEmpresa     =   '{{path("infopunto_ajax_getTipoOrigen") }}';
            url_verificar_catalogo        = "{{ path('infopunto_ajaxVerificarCatalogo') }}";
            boolCamposLectura          = "{{boolCamposLectura}}"
            $('#infopuntodatoadicionaltype_login').attr('readonly','readonly');
            punto_cobertura_default="{{entity.puntoCoberturaId.id}}";
            {% if ptoCoberturaId is defined%}
                ptoCoberturaId = "{{ptoCoberturaId}}";
            {% endif %}
                
            {% if sectorId is defined%}
                sectorId = "{{sectorId}}";
            {% endif %}            
                   
            canton_default="{{cantonId}}";
            parroquia_default="{{parroquiaId}}";
            sector_default="{{entity.sectorId.id}}";
            vendedor_default="{{entity.usrVendedor}}";
            origlogin="{{login}}";
            url_canales = "{{path('infopunto_getCanales')}}";
            url_punto_venta = "{{path('infopunto_getPuntosVenta')}}";
            canal="{{canal}}";
            canalDesc="{{canalDesc}}";
            puntoVenta="{{puntoVenta}}";
            puntoVentaDesc="{{puntoVentaDesc}}";
            prefijoEmpresa = "{{prefijoEmpresa}}";
            loginEmpleado  = "{{loginEmpleado}}";
            nombreEmpleado = "{{nombreEmpleado}}";
            {%if arrayTipoOrigenSelected.valores is defined %}
            strTipoOrigenSelected    = "{{arrayTipoOrigenSelected.valores.strDescripcionCaracteristica}}";
            strTipoOrigenDescripcion = "{{arrayTipoOrigenSelected.valores.strDescripcion}}";
            {%else%}
            strTipoOrigenSelected    = "";
            strTipoOrigenDescripcion = "";
            {%endif%}

            //Si es vacío por defecto se fija en Nuevo
            if ("" === strTipoOrigenDescripcion)
            {
                strTipoOrigenDescripcion = "Nuevo";
            }
            strAplicaTipoOrigen      = "{{strAplicaTipoOrigen}}";
            strIsGrantedTipoOrigen   = "{%if is_granted("ROLE_9-6377")%}S{%else%}N{%endif%}";
            
            $(document).ready(function(){
                $('#infopuntodatoadicionaltype_esedificio').val('{{ entityPuntoDatoAdicional.esEdificio }}');
                $('#infopuntodatoadicionaltype_dependedeedificio').val('{{ entityPuntoDatoAdicional.dependeDeEdificio }}');
                esEdificio(true);
                dependeDeEdificio(true);                
            });
            
        {% if formasDeContacto is defined%}
            formasDeContacto = "{{formasDeContacto}}";
        {% endif %}
            
        {% if cargaFormasContacto is defined%}
            cargaFormasContacto = "{{cargaFormasContacto}}";
        {% endif %}
            
        {% if strEditaDatosGeograficos is defined%}
            strEditaDatosGeograficos = "{{strEditaDatosGeograficos}}";
        {% endif %}
            
        </script>    
        <script type="text/javascript" src="{{ asset('./bundles/comercial/js/infopunto/map.js?8') }}"></script>  
        <script type="text/javascript" src="{{ asset('./bundles/comercial/js/infopunto/edit.js?12') }}"></script>         

        <script>
            url_edificios="{{path('infopunto_getedificios')}}";
            url_getEncontradosNodoCliente = '{{path("elementoNodoCliente_getEncontrados") }}';
            url_getCantones = '{{path("admicanton_getCantones") }}';
        </script>    
{% endblock %}

{% block contenido_central %}
    {% set strLblPtos      = 'Ptos. Cobertura' %}
    {% set strLblCanton    = 'Cantón' %}
    {% set strLblParroquia = 'Parroquia' %}
    {% set strLblSector    = 'Sector' %}
    {% if app.session.get('strNombrePais') == 'PANAMA' %}
        {% set strLblCanton    = 'Distrito' %}
        {% set strLblParroquia = 'Corregimiento' %}
    {% endif %}
        <div id="titulo_content">
            <img src="{{ asset('public/images/'~ item.urlImagen | default('tools1.png') ~ '') }}" class="imagen-titulo-content">
            <h1>Editar Punto</h1>
        </div>
        <span class="campos-requeridos">* Campos requeridos</span>
        <div class="body_content">		
         {% for flashMessage in app.session.flashbag.get('notice') %}
         <div class="errormessage">
         {{ flashMessage }}
         </div>
         {% endfor %}       
            <form action="{{ path('infopunto_update', { 'id': entity.id }) }}" method="post" {{ form_enctype(edit_form) }} 
                onsubmit='if(validacionesForm()){if(comprueba_extension()){return true;}else{return false;}}else{return false;}' class="formulario">
                <div id="my-tabs">
                    <div id="tab1" class="x-hide-display">    
                        <table border='0'width='100%'>
                            <tr><td colspan='4'>&nbsp;</td></tr>
                            <tr>
                                <td>

                                </td>                            
                                <td style="vertical-align: top;">
                                    <table border='0' align='left' width='100%'>
                                        <tr>
                                            <td>
                                                <label for='infopuntodatoadicionaltype_login'>Login:</label>
                                            </td>
                                            <td>
                                                <table>
                                                    <tr>
                                                        <td>
                                                            <input type='text' id="infopuntodatoadicionaltype_login" onchange="validaLogin()" 
                                                                   maxlength="20" required='required' readonly='readonly' 
                                                                   name="infopuntodatoadicionaltype[login]" value='{{login}}'/> 
                                                        </td>
                                                        <td>
                                                            <img id="img-valida-login" src="{{ asset('public/images/delete.png') }}" 
                                                                 title="login correcto" width="25" height="25"/>
                                                        </td>
                                                </table>
                                            </td> 
                                        </tr>
                                        <tr>

                                            <td>
                                                <div id="lbNombrePunto">
                                                {{ form_label(edit_form.nombrepunto) }}
                                                </div>
                                            </td>

                                            <td>
                                                {{ form_widget(edit_form.nombrepunto) }}
                                            </td> 

                                        </tr>                                        

                                        <tr>

                                            <td>
                                                <div id="lbDireccion" >
                                                {{ form_label(edit_form.direccion) }} 
                                                </div>
                                            </td>
                                            <td>
                                                {{ form_widget(edit_form.direccion) }}
                                            </td> 

                                        </tr>

                                        <tr>
                                            <td>
                                                {{ form_label(edit_form.descripcionpunto) }}
                                            </td>
                                            <td>
                                                {{ form_widget(edit_form.descripcionpunto) }}
                                            </td> 
                                        </tr>
                                        <tr>
                                            <td>
                                                {{ form_label(edit_form.observacion) }}
                                            </td>
                                            <td>
                                                {{ form_widget(edit_form.observacion) }}
                                            </td> 
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>Vendedor:</label>
                                            </td>
                                            <td>
                                                <div id='div_errorvendedor' class='errormessage' style="display:none">
                                                    Campo Vendedor es obligatorio</div>                                                
                                                <div id='combo_vendedor' required="true"></div>
                                            </td> 
                                        </tr>    
                                        {% if (prefijoEmpresa == 'MD' or prefijoEmpresa == 'EN') %}
                                        <tr>
                                            <td>
                                                <label  class='campo-obligatorio'>* Canal:</label>
                                            </td>
                                            <td>
                                                <div id='div_errorcanal' class='errormessage' style="display:none">Canal es obligatorio</div>                                                
                                                <div id='Canales'></div>
                                            </td> 
                                        </tr> 
                                        <tr>
                                            <td>
                                                <label id="label_punto_venta" style='display: block' class='campo-obligatorio'>* Punto de venta:
                                                </label>
                                            </td>
                                            <td>
                                                <div id='div_errorpuntoventa' class='errormessage' style="display:none">Punto de Venta es obligatorio
                                                </div>                                                
                                                <div id='PuntosVenta' style='display: block'></div>
                                            </td> 
                                        </tr>
                                        {% endif %}
                                    </table>
                                </td>
                                <td>

                                </td>
                                <td style="vertical-align: top;">

                                    <table border='0' align='left'>
                                       {% if (prefijoEmpresa == 'MD' or prefijoEmpresa == 'EN') %}  
                                        <tr>
                                            <td>
                                                <label id='labelLatitud' class="campo-obligatorio">Coord. latitud:</label> 
                                            </td>
                                            <td>

                                                <div id="validaLatitud">

                                                    <input type="text" onkeyup="validarGrados(this.value,1)" class="coordenadas-field"   
                                                           id="grados_la" name="grados_la">
                                                    &deg;<input type="text" onkeyup="validarMinutos(this.value,1)" class="coordenadas-field"  
                                                           maxlength="2" id="minutos_la" name="minutos_la">
                                                    '<input type="text" onkeyup="validarSegundos(this.value,1)" class="coordenadas-field"  
                                                            maxlength="2" id="segundos_la" name="segundos_la">
                                                    .<input type="text" onkeyup="validarDecimasSegundos(this.value,1)" class="coordenadas-field-mili"
                                                            maxlength="3" id="decimas_segundos_la" name="decimas_segundos_la">
                                                    &quot;
                                                    <select onchange="validaInspeccion(1)" class="text-field" id="latitud" name="latitud">
                                                        <option value="T">Seleccione...</option>
                                                        <option value="N">Norte</option>
                                                        <option value="S">Sur</option>
                                                    </select>                  
                                                </div>                                                

                                            </td>
                                            <td></td>
                                        </tr> 
                                        <tr>
                                            <td>
                                                <label id='labelLongitud' class="campo-obligatorio">Coord. longitud:</label>  
                                            </td>
                                            <td>
                                                <table>
                                                    <tr>
                                                        <td>
                                                            <div id="validaTiempo">
                                                                <input type="text" onkeyup="validarGrados(this.value,0)" 
                                                                       class="coordenadas-field" id="grados_lo" name="grados_lo">&deg;
                                                                <input type="text" onkeyup="validarMinutos(this.value,0)"
                                                                       class="coordenadas-field" maxlength="2"  id="minutos_lo" name="minutos_lo">'
                                                                <input type="text" onkeyup="validarSegundos(this.value,0)" 
                                                                       class="coordenadas-field" maxlength="2"  id="segundos_lo" name="segundos_lo">.
                                                                <input type="text" onkeyup="validarDecimasSegundos(this.value,0)"
                                                                       class="coordenadas-field-mili" maxlength="3"  id="decimas_segundos_lo" 
                                                                       name="decimas_segundos_lo">&quot;
                                                                <select onchange="validaInspeccion(0)" class="text-field" id="longitud" 
                                                                        name="longitud">
                                                                    <option value="T">Seleccione...</option>
                                                                    <option value="E">Este</option>
                                                                    <option value="O">Oeste</option>
                                                                </select>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <a href="javascript:muestraMapa()" class="">
                                                                <img src="{{ asset('public/images/images_crud/gmaps.png')}}" 
                                                                     title="Seleccionar desde Mapa" class="button-crud">
                                                            </a>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <input type='text' style='display:none' id="infopuntoextratype_formas_contacto" required='required' 
                                                       name="infopuntoextratype[formas_contacto]"/>        
                                                <input id='infopuntoextratype_personaId' name='infopuntoextratype[personaId]' type='hidden' 
                                                       value='{{cliente.id}}'>    
                                                <input id='infopuntoextratype_latitudFloat' name='infopuntoextratype[latitudFloat]' type='hidden'
                                                       value=''>    
                                                <input id='infopuntoextratype_longitudFloat' name='infopuntoextratype[longitudFloat]' type='hidden' 
                                                       value=''>    
                                                <input id='infopuntoextratype_ptoCoberturaId' name='infopuntoextratype[ptoCoberturaId]' type='hidden'>
                                                <input id='infopuntoextratype_sectorId' name='infopuntoextratype[sectorId]' type='hidden'>
                                                <input id='infopuntoextratype_loginVendedor' name='infopuntoextratype[loginVendedor]' type='hidden'>												
                                                <input id='strTipoOrigenSelected' name='strTipoOrigenSelected' type='hidden'>
                                                <input id='infopuntoextratype_canal' name='infopuntoextratype[canal]' type='hidden' 
                                                       value=''>												
                                                <input id='infopuntoextratype_punto_venta' name='infopuntoextratype[punto_venta]' type='hidden' 
                                                       value=''>												
                                                <input id='infopuntoextratype_rol' name='infopuntoextratype[rol]' type='hidden' 
                                                       value='{{rol}}'>
                                                <input id='infopuntoextratype_cantonId' name='infopuntoextratype[cantonId]' type='hidden' value=''>
                                                <input id='infopuntoextratype_parroquiaId' name='infopuntoextratype[parroquiaId]' type='hidden' 
                                                       value=''>
                                                {{ form_widget(edit_form._token)}}    
                                            </td>
                                        </tr>
                                        {% endif %}   
                                        
                                        <tr>

                                            <td>

                                                <label id="lbCobertura">{{ strLblPtos }}: </label>

                                            </td>
                                            <td>

                                                <div id='combo_ptoscobertura' required="true" ></div>

                                            </td> 

                                            <td></td>
                                        </tr>

                                        <tr>
                                            <td>
                                                <label id="lbCanton">{{ strLblCanton }}:</label>
                                            </td>
                                            <td>

                                                <div id='combo_cantones' required="true"  ></div>

                                            </td> 

                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label id="lbParroquia" >{{ strLblParroquia }}:</label>
                                            </td>
                                            <td>
                                                <div id='combo_parroquias' required="true"  ></div>
                                            </td> 
                                            <td></td>
                                        </tr>  
                                        <tr>
                                            <td>
                                                <label id="lbSector" >{{ strLblSector }}:</label>
                                            </td>
                                            <td>
                                                <div id='div_errorsector' class='errormessage' style="display:none">
                                                    Campo Sector es obligatorio</div>                                                
                                                <div id='combo_sector' required="true" ></div>
                                            </td> 
                                            <td></td>
                                        </tr>

                                        <tr>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div id='div_label_nombreEdificio' style='display:none'>
                                                    <label for='infopuntodatoadicionaltype_nombreEdificio' class='campo-obligatorio'>
                                                        Nombre Edificio:</label>
                                                </div>
                                            </td>
                                            <td>
                                                <div id='div_nombreEdificio' style='display:none'>											
                                                    <input type='text' id="infopuntodatoadicionaltype_nombreEdificio"
                                                           name="infopuntodatoadicionaltype[nombreEdificio]"
                                                           value="{{entityPuntoDatoAdicional.nombreEdificio}}" maxlength="60"  />
                                                </div>
                                            </td> 
                                            <td></td>
                                        </tr>										
                                        {%if 'S' == strAplicaTipoOrigen and is_granted("ROLE_9-6377")%}
                                        <tr>
                                            <td>
                                                <div id='lblEsMigracion'>
                                                    <label for='tipoOrigenDiv'>* Tipo de Origen:</label>
                                                </div>
                                            </td>
                                            <td>
                                                <div id='tipoOrigenDiv'>
                                                </div>
                                            </td> 
                                            <td></td>
                                        </tr>
                                        {%endif%}
                                            <tr>
                                                <td>
                                                    <div id='div_label_dependeedificio'>
                                                        <label  for='infopuntodatoadicionaltype_login'>Depende de Edificio:</label>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div id='div_select_dependeedificio'>
                                                        <select id="infopuntodatoadicionaltype_dependedeedificio" onchange="dependeDeEdificio()" required='required' name="infopuntodatoadicionaltype[dependedeedificio]">
                                                        <option value='S'>Si</option><option value='N' selected='selected'>No</option>
                                                        </select>
                                                    </div>
                                                </td> 
                                                <td></td>
                                            </tr> 
                                        <tr>
                                            <td>
                                                <div id='div_label_edifpadre' style='display: none'>
                                                    <label for='infopuntodatoadicionaltype_login'>Edificio Padre:</label>
                                                </div>
                                            </td>
                                            <td><div id='div_input_edifpadre' style='display: none' >
                                                    <input type='text' id="infopuntodatoadicionaltype_puntoedificio"
                                                           name="infopuntodatoadicionaltype[puntoedificio]" 
                                                           value="{{nombreNodoCliente}}"/>
                                                    
                                                    <input type='hidden' id="infopuntodatoadicionaltype_puntoedificioid"
                                                           name="infopuntodatoadicionaltype[puntoedificioid]" 
                                                           value="{{idNodoCliente}}"/>
                                                    <input type='hidden' id="nuevoNodoCliente" name="infopuntodatoadicionaltype[nuevoNodoCliente]" value ="" />
                                                    <a href='#' onclick="showEdificios()"><img src="{{ asset('public/images/images_crud/search.png')}}" width="11" height="11" /></a>
                                                </div>    
                                            </td> 
                                            <td></td>
                                        </tr>

                                        <tr>
                                            <td>
                                                <div id="labelTipoNegocio">
                                                {{ form_label(edit_form.tipoNegocioId) }}
                                                </div>
                                            </td>
                                            <td>
                                                {{ form_widget(edit_form.tipoNegocioId) }}
                                            </td> 
                                            <td></td>
                                        </tr> 
                                        <tr>
                                            <td>
                                                <div id="labelTipoUbicacion">
                                                {{ form_label(edit_form.tipoUbicacionId) }} 
                                                </div>
                                            </td>
                                            <td>
                                                {{ form_widget(edit_form.tipoUbicacionId) }}
                                            </td> 
                                            <td></td>
                                        </tr> 
                                        <tr>
                                            <td>
                                            </td>
                                            <td>
                                                <div id="divCroquis" class='infomessage'>croquis: solo formato jpg y png</div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div id="labelCroquis">
                                                {{ form_label(edit_form.file) }}
                                                </div>
                                            </td>
                                            <td>
                                                <table>
                                                    <tr>
                                                        <td>
                                                            {{ form_widget(edit_form.file) }}
                                                        </td>
                                                        <td>
                                                            <div class="button-clean-field" title="Limpiar Archivo Croquis"
                                                                 onClick='document.getElementById("infopuntotype_file").value = ""'></div>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td> 
                                            <td></td>
                                        </tr>
                                       {% if (prefijoEmpresa != 'MD' and  prefijoEmpresa != 'EN' ) %}  
                                        <tr>
                                            <td>
                                                <label id='labelLatitud' class="campo-obligatorio">Coord. latitud:</label> 
                                            </td>
                                            <td>

                                                <div id="validaLatitud">

                                                    <input type="text" onkeyup="validarGrados(this.value,1)" class="coordenadas-field"   
                                                           id="grados_la" name="grados_la">
                                                    &deg;<input type="text" onkeyup="validarMinutos(this.value,1)" class="coordenadas-field"  
                                                           maxlength="2" id="minutos_la" name="minutos_la">
                                                    '<input type="text" onkeyup="validarSegundos(this.value,1)" class="coordenadas-field"  
                                                            maxlength="2" id="segundos_la" name="segundos_la">
                                                    .<input type="text" onkeyup="validarDecimasSegundos(this.value,1)" class="coordenadas-field-mili"
                                                            maxlength="3" id="decimas_segundos_la" name="decimas_segundos_la">
                                                    &quot;
                                                    <select onchange="validaInspeccion(1)" class="text-field" id="latitud" name="latitud">
                                                        <option value="T">Seleccione...</option>
                                                        <option value="N">Norte</option>
                                                        <option value="S">Sur</option>
                                                    </select>                  
                                                </div>                                                

                                            </td>
                                            <td></td>
                                        </tr> 
                                        <tr>
                                            <td>
                                                <label id='labelLongitud' class="campo-obligatorio">Coord. longitud:</label>  
                                            </td>
                                            <td>
                                                <table>
                                                    <tr>
                                                        <td>
                                                            <div id="validaTiempo">
                                                                <input type="text" onkeyup="validarGrados(this.value,0)" 
                                                                       class="coordenadas-field" id="grados_lo" name="grados_lo">&deg;
                                                                <input type="text" onkeyup="validarMinutos(this.value,0)"
                                                                       class="coordenadas-field" maxlength="2"  id="minutos_lo" name="minutos_lo">'
                                                                <input type="text" onkeyup="validarSegundos(this.value,0)" 
                                                                       class="coordenadas-field" maxlength="2"  id="segundos_lo" name="segundos_lo">.
                                                                <input type="text" onkeyup="validarDecimasSegundos(this.value,0)"
                                                                       class="coordenadas-field-mili" maxlength="3"  id="decimas_segundos_lo" 
                                                                       name="decimas_segundos_lo">&quot;
                                                                <select onchange="validaInspeccion(0)" class="text-field" id="longitud" 
                                                                        name="longitud">
                                                                    <option value="T">Seleccione...</option>
                                                                    <option value="E">Este</option>
                                                                    <option value="O">Oeste</option>
                                                                </select>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <a href="javascript:muestraMapa()" class="">
                                                                <img src="{{ asset('public/images/images_crud/gmaps.png')}}" 
                                                                     title="Seleccionar desde Mapa" class="button-crud">
                                                            </a>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <input type='text' style='display:none' id="infopuntoextratype_formas_contacto" required='required' 
                                                       name="infopuntoextratype[formas_contacto]"/>        
                                                <input id='infopuntoextratype_personaId' name='infopuntoextratype[personaId]' type='hidden' 
                                                       value='{{cliente.id}}'>    
                                                <input id='infopuntoextratype_latitudFloat' name='infopuntoextratype[latitudFloat]' type='hidden'
                                                       value=''>    
                                                <input id='infopuntoextratype_longitudFloat' name='infopuntoextratype[longitudFloat]' type='hidden' 
                                                       value=''>    
                                                <input id='infopuntoextratype_ptoCoberturaId' name='infopuntoextratype[ptoCoberturaId]' type='hidden'>
                                                <input id='infopuntoextratype_sectorId' name='infopuntoextratype[sectorId]' type='hidden'>
                                                <input id='infopuntoextratype_loginVendedor' name='infopuntoextratype[loginVendedor]' type='hidden'>												
                                                <input id='strTipoOrigenSelected' name='strTipoOrigenSelected' type='hidden'>
                                                <input id='infopuntoextratype_canal' name='infopuntoextratype[canal]' type='hidden' 
                                                       value=''>												
                                                <input id='infopuntoextratype_punto_venta' name='infopuntoextratype[punto_venta]' type='hidden' 
                                                       value=''>												
                                                <input id='infopuntoextratype_rol' name='infopuntoextratype[rol]' type='hidden' 
                                                       value='{{rol}}'>
                                                <input id='infopuntoextratype_cantonId' name='infopuntoextratype[cantonId]' type='hidden' value=''>
                                                <input id='infopuntoextratype_parroquiaId' name='infopuntoextratype[parroquiaId]' type='hidden' 
                                                       value=''>
                                                {{ form_widget(edit_form._token)}}    
                                            </td>
                                        </tr>
                                        {% endif %}    
                                    </table>
                                </td>
                            </tr>
                        </table>    
                    </div>
                    <div id="tab2" class="x-hide-display">
                        <table border='0' align='center'>
                            <tr><td>&nbsp;</td></tr>
                            <tr>
                                <td>
                                    <div id='lista_formas_contacto_grid'></div>
                                    <div class='infomessage'>Todo número de telefono debe iniciar con el codigo de area correspondiente</div>
                                    <div class='infomessage'>Todo n&uacutemero de tel&eacute;fono internacional debe tener entre 7 y 15 d&iacute;gitos</div>
                                </td>
                            </tr>   
                        </table>            
                    </div>                     
                </div>
                <div class="buttons">
                    <p>
                        <button type="submit" onclick="grabarFormasContacto('#infopuntoextratype_formas_contacto');" 
                                class="button-crud">Guardar</button>
                        <span class="height20px">
                            &nbsp;&nbsp;
                        </span>
                        <span class="height20px">
                            <a class="button-crud" href="{{ path('infopunto_show',{'id':entity.id,'rol':rol }) }}">Regresar</a>
                        </span>                                        
                    </p>
                </div>

            </form>
        </div>
        <div id='windowMap' style='display:none'>
        <div id="map_canvas" style="width:800px; height:600px"></div>
        </div>
{% endblock contenido_central %}

{% block javascripts_footer %}
<script>
    
        {% if latitudFloat is defined and longitudFloat is defined%}
            latitudFloat  = "{{latitudFloat}}";
            longitudFloat = "{{longitudFloat}}";
        {% elseif (entity.latitud is not null) and  (entity.longitud is not null) %}
            latitudFloat  = "{{entity.latitud}}";
            longitudFloat = "{{entity.longitud}}";
		{% endif %}	                        
            
            function esEdificio(isNoCambiar){
                if ($('#infopuntodatoadicionaltype_esedificio').val()=='S'){
                    
                    ocultarDiv('div_label_dependeedificio');
                    ocultarDiv('div_select_dependeedificio');
					mostrarDiv('div_nombreEdificio');					
					mostrarDiv('div_label_nombreEdificio');
                    ocultarDiv('div_label_edifpadre');
                    ocultarDiv('div_input_edifpadre');
                    $('#infopuntodatoadicionaltype_puntoedificio').attr('required','required');
					$('#infopuntodatoadicionaltype_nombreEdificio').attr('required','required');
                    if (!isNoCambiar)
                    {
                        $('#infopuntodatoadicionaltype_dependedeedificio').val('N');
                        $('#infopuntodatoadicionaltype_puntoedificio').val('');
                        $('#infopuntodatoadicionaltype_puntoedificioid').val('');
                        $('#infopuntodatoadicionaltype_nombreEdificio').val('');
                    }
                }
                else
                {
                    mostrarDiv('div_label_dependeedificio');
                    mostrarDiv('div_select_dependeedificio');                    
                    ocultarDiv('div_label_edifpadre');
                    ocultarDiv('div_input_edifpadre');
					ocultarDiv('div_nombreEdificio');
					ocultarDiv('div_label_nombreEdificio');					
                    $('#infopuntodatoadicionaltype_puntoedificio').removeAttr('required');
					$('#infopuntodatoadicionaltype_nombreEdificio').removeAttr('required');
                    if (!isNoCambiar)
                    {
                        $('#infopuntodatoadicionaltype_dependedeedificio').val('N');
                        $('#infopuntodatoadicionaltype_puntoedificio').val('');
                        $('#infopuntodatoadicionaltype_puntoedificioid').val('');
                        $('#infopuntodatoadicionaltype_nombreEdificio').val('');
                    }
                }
                
            }
            function dependeDeEdificio(isNoCambiar){
                if ($('#infopuntodatoadicionaltype_dependedeedificio').val()=='S'){
                    mostrarDiv('div_label_edifpadre');
                    mostrarDiv('div_input_edifpadre');
                    $('#infopuntodatoadicionaltype_puntoedificio').attr('required','required');
                    if (!isNoCambiar)
                    {
                        $('#infopuntodatoadicionaltype_puntoedificio').val('');
                        $('#infopuntodatoadicionaltype_puntoedificioid').val('');
                    }
                }
                else
                {
                    ocultarDiv('div_label_edifpadre');
                    ocultarDiv('div_input_edifpadre');

            $('#infopuntodatoadicionaltype_puntoedificio').removeAttr('required');
                    if (!isNoCambiar)
                    {
                        $('#infopuntodatoadicionaltype_puntoedificio').val('');
                        $('#infopuntodatoadicionaltype_puntoedificioid').val('');
                    }
                }
                
            } 
                
                function mostrarDiv(div){
                    capa = document.getElementById(div);
                    capa.style.display = 'block';    
                }
                function ocultarDiv(div){
                    capa = document.getElementById(div);
                    capa.style.display = 'none';    
                }		

function esNoLoginCaracter(event){
    //alert(event.keyCode);
    return (
        //letras mayusculas
        (event.keyCode > 64 && event.keyCode < 91)  
        ||
        //letras minusculas
        (event.keyCode >= 96 && event.keyCode < 123)
        //numeros
        || (event.keyCode > 47 && event.keyCode < 58)
        // caracter -
        || (event.keyCode == 173)
        // backspace
        || (event.keyCode == 8)    
        // suprimir
        || (event.keyCode == 46)       
    )
}
$(function(){
    $("#infopuntodatoaldicionaltype_login").keydown(function(event){
        //alert('code:'+esNoLoginCaracter(event));
        if(!esNoLoginCaracter(event)) return false;
    });
});

</script>      

{% endblock javascripts_footer %}
