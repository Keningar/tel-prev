/**
 * DEBE EJECUTARSE EN DB_INFRAESTRUCTURA
 * ROLLBACK DE LOS NUEVOS TIPOS DE INFRAESTRUCTURA
 * @author Anthony Santillan <asantillany@telconet.ec>
 * @version 1.0 14-02-2023.
 */

 DELETE FROM DB_INFRAESTRUCTURA.ADMI_MODELO_ELEMENTO
 WHERE NOMBRE_MODELO_ELEMENTO = 'MANGA-MANGA-ODF-NODO'
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_INFRAESTRUCTURA.ADMI_MODELO_ELEMENTO
 WHERE NOMBRE_MODELO_ELEMENTO = 'NODO-ODF-MANGA-ODF-NODO'
 AND USR_CREACION = 'asantillany';

/**
 * DEBE EJECUTARSE EN DB_GENERAL
 * ROLLBACK DE LOS TIPOS DE RUTA PERMITIDOS
 * @author Anthony Santillan <asantillany@telconet.ec>
 * @version 1.0 14-02-2023.
 */

 DELETE FROM DB_GENERAL.ADMI_PARAMETRO_DET
 WHERE DESCRIPCION = 'Listado de rutas disponibles'
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_GENERAL.ADMI_PARAMETRO_CAB
 WHERE NOMBRE_PARAMETRO = 'TIPO_DE_RUTA'
 AND USR_CREACION = 'asantillany';

/** 
 * CAMPOS ESPECIALES
 */ 
 DELETE FROM DB_GENERAL.ADMI_PARAMETRO_DET
 WHERE DESCRIPCION = 'Lista de simbolos para reemplazarlos por tildes'
 AND VALOR1 = 'N/A'
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_GENERAL.ADMI_PARAMETRO_DET
 WHERE DESCRIPCION = 'Lista de simbolos para reemplazarlos por tildes'
 AND VALOR1 = 'â€“'
 AND USR_CREACION = 'asantillany';

/** 
 * CONFIGURACION DEL NFS
 */ 

 DELETE FROM DB_GENERAL.ADMI_MOTIVO
 WHERE NOMBRE_MOTIVO = 'CARGA_DE_HILOS'
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_GENERAL.ADMI_PARAMETRO_DET
 WHERE PARAMETRO_ID = (SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB WHERE NOMBRE_PARAMETRO = 'AUTOMATIZACION DE CARGA DE HILOS' AND MODULO = 'ADMINISTRACION' AND ESTADO = 'Activo' )
 AND DESCRIPCION = 'MOTIVO_ARCHIVO_HILOS'
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_GENERAL.ADMI_PARAMETRO_DET
 WHERE PARAMETRO_ID = (SELECT ID_PARAMETRO FROM DB_GENERAL.ADMI_PARAMETRO_CAB WHERE NOMBRE_PARAMETRO = 'AUTOMATIZACION DE CARGA DE HILOS' AND MODULO = 'ADMINISTRACION' AND ESTADO = 'Activo' )
 AND DESCRIPCION = 'CONFIGURACION NFS'
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_GENERAL.ADMI_PARAMETRO_CAB
 WHERE NOMBRE_PARAMETRO = 'AUTOMATIZACION DE CARGA DE HILOS'
 AND USR_CREACION = 'asantillany';

 /**
  * DIRECTORIO PARA ALAMACENAR EL ARCHIVO EN EL NFS
  */

 DELETE FROM DB_GENERAL.ADMI_GESTION_DIRECTORIOS
 WHERE MODULO = 'Administracion'
 AND SUBMODULO = 'ArchivoBackbone'
 AND USR_CREACION = 'asantillany';

 /**
 * DEBE EJECUTARSE EN DB_SEGURIDAD
 * Nuevo menu para consulta de rutas backbone
 * @author Anthony Santillan <asantillany@telconet.ec>
 * @version 1.0 14-02-2023.
 */

 DELETE FROM DB_SEGURIDAD.SEGU_PERFIL_PERSONA 
 WHERE PERFIL_ID = (SELECT ID_PERFIL FROM DB_SEGURIDAD.SIST_PERFIL WHERE NOMBRE_PERFIL = 'Consulta de rutas backbone')
 AND PERSONA_ID  = (SELECT ID_PERSONA FROM DB_COMERCIAL.INFO_PERSONA WHERE LOGIN='asantillany')
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_SEGURIDAD.SEGU_ASIGNACION 
 WHERE PERFIL_ID = (SELECT ID_PERFIL FROM DB_SEGURIDAD.SIST_PERFIL WHERE NOMBRE_PERFIL = 'Consulta de rutas backbone')
 AND RELACION_SISTEMA_ID  = (SELECT ID_RELACION_SISTEMA FROM DB_SEGURIDAD.SEGU_RELACION_SISTEMA WHERE MODULO_ID = (SELECT ID_MODULO FROM DB_SEGURIDAD.SIST_MODULO WHERE NOMBRE_MODULO = 'configuracionRutasBackbone' AND ESTADO = 'Activo') )
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_SEGURIDAD.SIST_PERFIL 
 WHERE NOMBRE_PERFIL = 'Consulta de rutas backbone'
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_SEGURIDAD.SEGU_RELACION_SISTEMA 
 WHERE MODULO_ID = (SELECT ID_MODULO FROM DB_SEGURIDAD.SIST_MODULO WHERE NOMBRE_MODULO = 'configuracionRutasBackbone' AND ESTADO = 'Activo')
 AND ACCION_ID = (SELECT ID_ACCION FROM DB_SEGURIDAD.SIST_ACCION WHERE NOMBRE_ACCION = 'index' AND ESTADO = 'Activo')
 AND ITEM_MENU_ID = (SELECT ID_ITEM_MENU FROM DB_SEGURIDAD.SIST_ITEM_MENU WHERE NOMBRE_ITEM_MENU ='Consulta de rutas backbone' AND ESTADO = 'Activo')
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_SEGURIDAD.SIST_MODULO 
 WHERE NOMBRE_MODULO = 'configuracionRutasBackbone'
 AND USR_CREACION = 'asantillany';

 DELETE FROM DB_SEGURIDAD.SIST_ITEM_MENU 
 WHERE NOMBRE_ITEM_MENU = 'Consulta de rutas backbone'
 AND USR_CREACION = 'asantillany';


