{% extends "::layout_completo.html.twig" %}

{% block stylesheets %}
    {{ parent() }}   
    <link href="{{ asset('./bundles/administracion/css/GestionTaller.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}
{% block javascripts%}
    {{ parent() }}    


{% endblock %}

{% block contenido_central %}
<div id="titulo_content">
    <img src="{{ asset('public/images/'~ item.urlImagen | default('tools1.png') ~ '') }}" class="imagen-titulo-content">
    <h1>Orden de Trabajo Generada al Veh&iacute;culo</h1>
</div>
<div class="body_content k-content">
        <table id="tabla_orden_trabajo_detalles" name="tabla_orden_trabajo_detalles" width="80%" cellpadding="1" cellspacing='0'  border='1' 
               style="margin:0% 10%;" class="tablas_orden_trabajo x-grid-table x-grid-table-resizer">
            <tr>
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="5" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter boldContent titulosPrincipales">MANTENIMIENTO VEH&Iacute;CULOS</div>
                </td>
            </tr>
            <tr>
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="5" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter boldContent titulosPrincipales">
                        ORDEN DE TRABAJO {% if verNumeracionOT == 'SI' %}<span class="redContent">N&deg; {{numeroOrdenTrabajo}}</span>{% endif %}
                    </div></td>
            </tr>

            <tr>
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="1" rowspan="3" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter">
                        {% if idEmpresaSession==10 %}
                        <img style="width:66%" class="imgsOrdenTrabajo" src="{{rutaimagenCabecera}}" 
                             class="imagen-titulo-content"/>
                        {% else %}
                        <img class="imgsOrdenTrabajo" src="{{rutaimagenCabecera}}" class="imagen-titulo-content"/>
                        {% endif %}
                    </div>
                </td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="2" rowspan="2" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter titulosPrincipales">
                        <span style="font-size:20px;" class="redContent boldContent italicContent">{{kmActual}} KM</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignCenter"></div></td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignCenter"></div></td>
            </tr>
            <tr>
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignCenter italicContent">FECHA INICIO&#58; </div></td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignCenter">
                        <span class=" italicContent">{{ fechaInicio }}</span>
                    </div>
                </td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignCenter italicContent">FECHA FIN&#58; </div></td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignCenter">
                        <span class=" italicContent">{{ fechaFin }}</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="5" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter boldContent titulosPrincipales">MANTENIMIENTO {{tipoMantenimientoOT}}</div>
                </td>
            </tr>
            <tr>
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignRight italicContent">NOMBRE TALLER&#58;</div></td>
                <td colspan="2" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter">
                        <span class="whiteSpaceNormal redContent italicContent">{{nombrePerAsignadoOrden}}
                        </span>
                    </div>
                </td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignRight italicContent">A&Ntilde;O&#58;</div></td>
                <td colspan="1" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter">
                        <span class="redContent italicContent">{{ detallesElemento.ANIO }}</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignRight italicContent">PLACA&#58;</div></td>
                <td colspan="2" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter">
                        <span class="redContent italicContent">{{placa}}</span>
                    </div>
                </td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignRight italicContent">MODELO&#58;</div></td>
                <td colspan="1" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter">
                        <span class="whiteSpaceNormal redContent italicContent">{{ modeloElemento }}</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignRight italicContent">VEH&Iacute;CULO &#35;&#58;</div></td>
                <td colspan="2" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter">
                        <span class="redContent italicContent">{{detallesElemento.DISCO}}</span>
                    </div>
                </td>
                <td colspan="1" class="x-grid-cell"><div class="x-grid-cell-inner alignRight italicContent">CONDUCTOR&#58;</div></td>
                <td colspan="1" class="x-grid-cell">
                    <div class="x-grid-cell-inner alignCenter">
                        <span class="whiteSpaceNormal redContent italicContent">{{nombrePerConductor}}</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="5" class="x-grid-cell"><div class="x-grid-cell-inner"></div></td>
            </tr>
            {% set maxRowsCategoria = 4 %}
            {% set rowspanCategoria = 0 %}
            {% set rowsVacias = 0 %}

            {% for ordenTrabajoDet in ordenTrabajoDets %}
                {% if ordenTrabajoDet|length > maxRowsCategoria %}
                    {% set rowspanCategoria = ordenTrabajoDet|length %}
                    {% set rowsVacias = 0 %}
                {% else %}
                    {% set rowsVacias = maxRowsCategoria - ordenTrabajoDet|length %}
                    {% set rowspanCategoria = maxRowsCategoria %}
                {% endif %}

                {% for item in ordenTrabajoDet %}
                <tr>
                    <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                    {% if loop.first %}
                        <td class="x-grid-cell titulosCategorias" colspan="1" rowspan="{{ rowspanCategoria }}">
                            <div class="whiteSpaceNormal x-grid-cell-inner italicContent boldContent">{{item.nombreCategoriaTarea}}</div>
                        </td>
                    {% endif %}
                    <td colspan="4" class="x-grid-cell">
                        <div class="whiteSpaceNormal x-grid-cell-inner alignJustify">{{item.nombreTarea}}</div>
                    </td>
                </tr>
                {% endfor %}
                {% if rowsVacias > 0 %}
                    {% for i in 1..rowsVacias %}
                    <tr>
                        <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                        <td colspan="4" class="x-grid-cell">
                            <div class="whiteSpaceNormal x-grid-cell-inner"></div>
                        </td>
                    </tr>
                    {% endfor %}
                {% endif %}
            {% endfor %}
   
        </table>
        <br/><br/>
        <table width="80%" cellpadding="1" cellspacing='0'  border='0' 
               style="margin:0% 10%;" class="tablas_orden_trabajo x-grid-table x-grid-table-resizer">
            <tr class="tdSinBorde">
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="1" class="x-grid-cell celdasAutorizacion"><div class="x-grid-cell-inner">OBSERVACI&Oacute;N&#58;</div></td>

                <td colspan="4" class="x-grid-cell celdasAutorizacion" >
                    <div class="whiteSpaceNormal x-grid-cell-inner">{{observacion}}</div>
                </td>
            </tr>
            <tr class="tdSinBorde"><td colspan="6" class="x-grid-cell"><div class="x-grid-cell-inner">&nbsp;</div></td></tr>
            <tr class="tdSinBorde">
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="1" class="x-grid-cell celdasAutorizacion"><div class="x-grid-cell-inner">AUTORIZADO POR&#58;</div></td>

                <td colspan="1" class="x-grid-cell celdasAutorizacion" >
                    <div class="whiteSpaceNormal x-grid-cell-inner">{{nombreAutorizadoPor}}</div>
                </td>
                <td colspan="1" class="x-grid-cell celdasAutorizacion"><div class="x-grid-cell-inner alignRight">FIRMA</div></td>
                <td colspan="2" class="x-grid-cell celdasAutorizacion">
                    <div class="x-grid-cell-inner rayasFirma">
                        {% if rutaFirmaAutorizadoPor != '' %}
                        <img style="width:250px;height:130px;" class="imgsOrdenTrabajo" src="{{asset(rutaFirmaAutorizadoPor)}}" class="imagen-titulo-content"/>
                        {% else %}
                        &nbsp;
                        {% endif %}
                    </div>
                </td>
            </tr>
            <tr class="tdSinBorde"><td colspan="6" class="x-grid-cell"><div class="x-grid-cell-inner">&nbsp;</div></td></tr>
            <tr class="tdSinBorde">
                <td colspan="1" class="x-grid-cell celdaIzq"><div class="x-grid-cell-inner">&nbsp;</div></td>
                <td colspan="1" class="x-grid-cell celdasAutorizacion">
                    <div class="whiteSpaceNormal x-grid-cell-inner">CHOFER RESPONSABLE&#58;</div>
                </td>
                <td colspan="1" class="x-grid-cell celdasAutorizacion">
                    <div class="whiteSpaceNormal x-grid-cell-inner">{{nombrePerConductor}}</div>
                </td>
                <td colspan="1" class="x-grid-cell celdasAutorizacion"><div class="x-grid-cell-inner alignRight">FIRMA</div></td>
                <td colspan="2" class="x-grid-cell celdasAutorizacion">
                    <div class="x-grid-cell-inner rayasFirma">
                        {% if rutaFirmaChofer != '' %}
                        <img style="width:250px;height:130px;" class="imgsOrdenTrabajo" src="{{rutaFirmaChofer}}" class="imagen-titulo-content"/>
                        {% else %}
                        &nbsp;
                        {% endif %}
                    </div>
                </td>
            </tr>
        </table>
</div>
<div style="margin-bottom:5px;" class="buttons">
    <p>
        {% if is_granted('ROLE_337-3562') %}
        <span class="height20px">
            <a class="button-crud" href="{{ path('gestiontaller_showOrdenesTrabajoXTransporte', { 'id': idElemento }) }}">
                Ver Listado de &Oacute;rdenes de Trabajo del Veh&iacute;culo
            </a>
        </span>
        {% endif %}
        <span class="height20px">
            <a class="button-crud" href="{{ path('gestiontaller') }}">Regresar</a>
        </span>
    </p>
</div>
{% endblock contenido_central %}

    